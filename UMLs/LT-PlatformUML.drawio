<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/25.0.2 Chrome/128.0.6613.186 Electron/32.2.5 Safari/537.36" version="25.0.2" pages="2">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Course System">
    <mxGraphModel dx="2286" dy="1239" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="4681" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#3333FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-3" target="XPpvTZwdT9hd0jFBfwsr-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;/p&gt;&lt;span style=&quot;font-family: Verdana; font-size: 14px; text-align: center; caret-color: rgb(0, 0, 0); background-color: rgb(228, 228, 228);&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;i style=&quot;&quot;&gt;&lt;font color=&quot;#2b24f0&quot;&gt;Collection Name:&amp;nbsp; modulestore.active_versions&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(0, 0, 0); font-family: Verdana; font-size: 14px; text-align: center; caret-color: rgb(0, 0, 0); background-color: rgb(228, 228, 228);&quot;&gt;&lt;br&gt;&lt;/b&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;_id = ObjectId(&#39;......uuid.....&#39;)&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// [ Primary Key ]&lt;br&gt;search_targets = {&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // predefined search condition&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &#39;filter_key_A&#39; : &#39;search string&#39;,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&#39;filter_key_B&#39; : &#39;search string&#39;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;}&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;versions = {&amp;nbsp;&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &#39;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;draft-branch&lt;/font&gt;&lt;/b&gt;&#39;: ObjectId(&#39;.....uuid.....&#39;),&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// &lt;font color=&quot;#3333ff&quot;&gt;PK of &#39;modulestore.structures&#39;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &#39;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;published-branch&lt;/font&gt;&lt;/b&gt;&#39;: ObjectId(&#39;....uuid....&#39;)&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;// &lt;font color=&quot;#3333ff&quot;&gt;PK of &#39;modulestore.structures&#39;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;}&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;schema_version = 1&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Data version&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;last_update = ISODate(...)&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;edited_on = ISODate(...)&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;edited_by = ISODate(...)&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;font color=&quot;#3333ff&quot;&gt;&lt;b&gt;run&lt;/b&gt;&lt;/font&gt; = string(......)&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Course Run String&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;course&lt;/font&gt;&lt;/b&gt; = &quot;course number &quot;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Course Number String&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;org&lt;/font&gt;&lt;/b&gt; = &quot;organization&quot;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Course Organization String&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;/div&gt;" tooltip="URL: https://docs.openedx.org/projects/edx-platform/en/latest/references/docs/xmodule/modulestore/docs/split-mongo.html#course-structures" id="XPpvTZwdT9hd0jFBfwsr-3">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=3;strokeColor=#3333FF;rounded=0;shadow=0;glass=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="26" y="216" width="500" height="278" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#0050ef;strokeColor=#001DBC;strokeWidth=3;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-4" target="XPpvTZwdT9hd0jFBfwsr-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-4" value="&lt;h2 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;MongoDB :&amp;nbsp; &amp;nbsp;Course Index Collection&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12px; font-weight: 400;&quot;&gt;def get_course_index(self, key, ...):&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12px; font-weight: 400;&quot;&gt;&quot;&quot;&quot;Return Course Structure Collection primary key by argument &#39;key&#39; containing &#39;org + course + run&#39;&quot;&quot;&quot;&lt;/span&gt;&lt;/h2&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="26" y="17" width="500" height="100" as="geometry" />
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#3333FF;exitX=1;exitY=0.25;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-6" target="XPpvTZwdT9hd0jFBfwsr-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;text-align: center; background-color: rgb(228, 228, 228);&quot;&gt;&lt;font face=&quot;Verdana&quot; color=&quot;#2b24f0&quot;&gt;&lt;span style=&quot;font-size: 14px; caret-color: rgb(0, 0, 0);&quot;&gt;&lt;b&gt;&lt;i&gt;Collection Name:&amp;nbsp; modulestore.structures&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/span&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;_id&lt;/font&gt;&lt;/b&gt; = ObjectId(&#39;......uuid.....&#39;)&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// &lt;font color=&quot;#3333ff&quot;&gt;&lt;b&gt;[ Primary Key ]&lt;/b&gt;&amp;nbsp;&lt;/font&gt; &amp;lt; ----- Pointed from modulestore.active_versions::version&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;edited_on = ISODate(...)&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;edited_by = user_id&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;previous_version = ObjectId(&#39;...uuid...&#39;)&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Pk of Collection &#39;modulestore.strucutres&#39; pointing to previous version of this Course&lt;br&gt;original_version = ObjectId(&#39;...uuid...&#39;)&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;// Pk of Collection &#39;modulestore.strucutres&#39; pointing to original version of this Course&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;schema_version = 1&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Data version&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;blocks&lt;/font&gt;&lt;/b&gt; = [&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; {&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;definition&lt;/font&gt;&lt;/b&gt; : ObjectId(&#39;...uuid...&#39;),&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Pk of &#39;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;modulestore.definitions&#39;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;block_type: &#39;XBlock/XModule type&#39;,&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Example: &#39;about&#39; / &#39;pdf&#39; / &#39;html&#39; / &#39;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;scormxblock&#39; / ......&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; block_id: &#39;Unique string in a course&#39;,&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;defaults : { },&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;fields&lt;/font&gt;&lt;/b&gt;: { ...&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;},&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // fields(key/value pairs) set depending on different XBlock/XModule type&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; edit_info&quot; : {&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; edited_by : user_id,&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; edited_on&quot; : ISODate(...),&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; previous_version : null or ObjectId(&#39;...uuid&#39;...),&amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp;the guid for the structure which previously changed this xblock&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; original_usage_version&quot; : null or ObjectId(&#39;...uuid...&#39;),&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; original_usage&quot; : null or ObjectId(&#39;...uuid...&#39;),&amp;nbsp; &amp;nbsp;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; source_version&quot; : null or&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;ObjectId(&#39;...uuid...&#39;)&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;,&amp;nbsp; &amp;nbsp; &amp;nbsp; //&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;the guid for the structure was copied/published into this block&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; update_version&quot; : ObjectId(&#39;...uuid...&#39;)&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; //&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;PK of &#39;modulestore.structures&#39;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;where this xblock got its current field values&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; },&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; asides = { ... }&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; },&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&amp;nbsp; &amp;nbsp; ......&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;]&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;/div&gt;" tooltip="URL: https://docs.openedx.org/projects/edx-platform/en/latest/references/docs/xmodule/modulestore/docs/split-mongo.html#course-structures" id="XPpvTZwdT9hd0jFBfwsr-6">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=3;strokeColor=#3333FF;rounded=0;shadow=0;glass=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="592" y="145" width="740" height="421" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#0050ef;strokeColor=#001DBC;strokeWidth=3;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-8" target="XPpvTZwdT9hd0jFBfwsr-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-8" value="&lt;h2 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;MongoDB:&amp;nbsp; &amp;nbsp;Course Structure Collection&lt;/span&gt;&lt;br&gt;&lt;/h2&gt;&lt;div&gt;The course structure defines, or outlines, the content of a course.&lt;/div&gt;&lt;div&gt;A block in this structure points to an XBlock definition. Different blocks, in the same or in different structures, can point to same definition&lt;br&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="592" y="17" width="740" height="100" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;text-decoration:underline;&quot;&gt;&lt;/p&gt;&lt;span style=&quot;font-family: Verdana; font-size: 14px; text-align: center; caret-color: rgb(0, 0, 0); background-color: rgb(228, 228, 228);&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;i style=&quot;&quot;&gt;&lt;font color=&quot;#2b24f0&quot;&gt;Collection Name:&amp;nbsp; modulestore.definitions&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(0, 0, 0); font-family: Verdana; font-size: 14px; text-align: center; caret-color: rgb(0, 0, 0); background-color: rgb(228, 228, 228);&quot;&gt;&lt;br&gt;&lt;/b&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;_id&lt;/font&gt;&lt;/b&gt; = ObjectId(&#39;......uuid.....&#39;)&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// &lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;[ Primary Key ]&lt;/font&gt;&lt;/b&gt; &amp;lt;--- Pointed from modulestore.structures._id&lt;br&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;fields&lt;/font&gt;&lt;/b&gt; = {...&lt;span style=&quot;background-color: initial;&quot;&gt;}&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// fields set of kinds of xblocks. It can be html content or any other data&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;block_type = &#39;XBlock/XModule type&#39;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Example: &#39;about&#39; / &#39;pdf&#39; / &#39;html&#39; / &#39;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;scormxblock&#39; / ......&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;schema_version = 1&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Data version&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px;&quot;&gt;edit_info&quot; : {&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px;&quot;&gt;&amp;nbsp; &amp;nbsp; edited_by : user_id,&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px;&quot;&gt;&amp;nbsp; &amp;nbsp; edited_on&quot; : ISODate(...),&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px;&quot;&gt;&amp;nbsp; &amp;nbsp; previous_version : null or ObjectId(&#39;...uuid&#39;...),&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp; original&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;_version&quot; : ObjectId(&#39;...uuid...&#39;)&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px;&quot;&gt;}&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:8px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;/div&gt;" tooltip="URL: https://docs.openedx.org/projects/edx-platform/en/latest/references/docs/xmodule/modulestore/docs/split-mongo.html#course-structures" id="XPpvTZwdT9hd0jFBfwsr-9">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=3;strokeColor=#3333FF;rounded=0;shadow=0;glass=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="1400" y="154" width="640" height="192" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#0050ef;strokeColor=#001DBC;strokeWidth=3;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-11" target="XPpvTZwdT9hd0jFBfwsr-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-11" value="&lt;h2 style=&quot;margin-top: 0px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;MongoDB:&amp;nbsp; &amp;nbsp;Course XBlock Definitions&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12px; font-weight: 400;&quot;&gt;XBlock definitions contain the content of each block.&lt;/span&gt;&lt;br&gt;&lt;/h2&gt;&lt;div&gt;A definition can be referenced by multiple blocks.&lt;br&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fillColor=#0050ef;fontColor=#ffffff;strokeColor=#001DBC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1400" y="17" width="640" height="100" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;class SplitMongoModuleStore&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;db_connection:&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;MongoConnection&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;services: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // i18n / fs / user / request_cache / gating...&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;_lookup_course&lt;/font&gt;&lt;/b&gt;(course_key...):&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;CourseEnvelope&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;get_course_index(course_key...): JSON object in modulestore.active_version&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;get_structure(course_key ...): JSON object in modulestore.structures&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;get_item&lt;/font&gt;&lt;/b&gt;(usage_key, depth=0...): Descriptor / XBlock&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;_load_items(course_entry, block_keys, depth=0...)&lt;span style=&quot;background-color: initial;&quot;&gt;: Descriptor / XBlock&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;create_runtime(course_entry...):&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;CachingDescriptorSystem&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font size=&quot;1&quot; color=&quot;#0000ff&quot;&gt;&lt;b style=&quot;font-size: 16px;&quot;&gt;cache_items&lt;/b&gt;&lt;/font&gt;(system, base_block_ids, course_key,...): dict //&lt;/span&gt;&lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;CachingDescriptorSystem&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;.&lt;b style=&quot;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#009900&quot;&gt;module_data&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;" tooltip="Source code:  common/lib/xmodule/xmodule/modulestore/split_mongo/split.py&#xa;&#xa;&#xa;    A Mongodb backed ModuleStore supporting versions, inheritance,&#xa;    and sharing.&#xa;&#xa;&#xa;class SplitMongoModuleStore(SplitBulkWriteMixin, ModuleStoreWriteBase):&#xa;&#xa;&#xa;    def cache_items(self, system, base_block_ids, course_key, depth=0, lazy=True):&#xa;        &quot;&quot;&quot;&#xa;        Handles caching of items once inheritance and any other one time&#xa;        per course per fetch operations are done.&#xa;&#xa;        Arguments:&#xa;            system: a CachingDescriptorSystem&#xa;            base_block_ids: list of BlockIds to fetch&#xa;            course_key: the destination course providing the context&#xa;            depth: how deep below these to prefetch&#xa;            lazy: whether to load definitions now or later&#xa;        &quot;&quot;&quot;&#xa;        ......&#xa;&#xa;&#xa;&#xa;&#xa;" id="XPpvTZwdT9hd0jFBfwsr-14">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="30" y="799" width="560" height="222" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;class DraftVersioningModuleStore&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;create_course(org, course, run, user_id,...):&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;CourseDescriptor&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;get_course(course_id, depth=0,...): CourseDescriptor&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;get_item&lt;/b&gt;(...): Descriptor&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;......&lt;/span&gt;&lt;/p&gt;" tooltip="Source code: common/lib/xmodule/xmodule/modulestore/split_mongo/split_draft.py" id="XPpvTZwdT9hd0jFBfwsr-15">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="30" y="1135.5" width="360" height="110" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;text-align: center; margin: 4px 0px 0px;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;CourseEnvelope&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;course_key: CourseKey&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;structure: JSON ( Loaded from modulestore.structures )&lt;/p&gt;" tooltip="Source code: common/lib/xmodule/xmodule/modulestore/split_mongo/__init__.py" id="XPpvTZwdT9hd0jFBfwsr-17">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="770" y="764" width="550" height="90" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-20" value="&lt;font color=&quot;#3333ff&quot;&gt;def _lookup_course(course_key):&lt;/font&gt;" style="swimlane;childLayout=stackLayout;horizontal=1;horizontalStack=1;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;stackBorder=10;stackSpacing=-12;resizable=1;align=center;points=[];whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="25" y="584" width="1100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-21" value="index = self.&lt;b&gt;get_course_index&lt;/b&gt;(coruse_key...)" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="XPpvTZwdT9hd0jFBfwsr-20" vertex="1">
          <mxGeometry x="10" y="33" width="290" height="57" as="geometry" />
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-22" value="structure_entry =&amp;nbsp; self.&lt;b&gt;get_structure&lt;/b&gt;(course_key, index.structure_id)" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="XPpvTZwdT9hd0jFBfwsr-20" vertex="1">
          <mxGeometry x="288" y="33" width="412" height="57" as="geometry" />
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-23" value="Encapsulate CourseEnvelope with course_key + structure_entry" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="XPpvTZwdT9hd0jFBfwsr-20" vertex="1">
          <mxGeometry x="688" y="33" width="402" height="57" as="geometry" />
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-24" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;exitX=0.473;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-23" target="XPpvTZwdT9hd0jFBfwsr-17" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="630" y="740" as="sourcePoint" />
            <mxPoint x="1160" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-26" value="Encapsulate" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="XPpvTZwdT9hd0jFBfwsr-24" vertex="1" connectable="0">
          <mxGeometry x="-0.1705" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-27" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Used by&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;entryX=0.464;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.468;exitY=1.004;exitDx=0;exitDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-3" target="XPpvTZwdT9hd0jFBfwsr-20" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="270" y="560" as="sourcePoint" />
            <mxPoint x="1160" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;class &lt;font color=&quot;#b266ff&quot;&gt;CachingDescriptorSystem&lt;/font&gt;&amp;nbsp; &amp;nbsp; ( cached by structure._id )&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;modulestore:&amp;nbsp;&lt;b style=&quot;background-color: initial; text-align: center;&quot;&gt;DraftVersioningModuleStore&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;course_entry:&lt;b&gt;&amp;nbsp;&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;CourseEnvelope&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;module_data&lt;/font&gt;&lt;/b&gt;: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Course JSON data loaded from MongoDB&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;load_item&lt;/font&gt;&lt;/b&gt;(usage_key,...):&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;Descriptor / XBlock&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Implemented by def&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;_load_item(...)&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;get_module_data(block_key, course_key)&amp;nbsp; &amp;nbsp;// Return &amp;amp; update &lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;module_data&lt;/font&gt;&lt;/b&gt; by def cache_items(...)&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#b266ff&quot;&gt;xblock_from_json&lt;/font&gt;&lt;/b&gt;(class_, course_key, block_key...). // Return xmodule by&amp;nbsp;&lt;/span&gt;&lt;b style=&quot;background-color: initial; text-wrap: nowrap; text-align: center;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#0000ff&quot;&gt;cache_items&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#9933ff&quot;&gt;construct_xblock_from_class&lt;/font&gt;&lt;/b&gt;(cls, ...): a Mixed class supported&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#00ff80&quot;&gt;XBlock.handle&lt;/font&gt;&lt;/b&gt;(handler_name,...)&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" tooltip="Source code: common/lib/xmodule/xmodule/modulestore/split_mongo/caching_descriptor_system.py" id="XPpvTZwdT9hd0jFBfwsr-29">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="770" y="896" width="550" height="190" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-30" value="def _lookup_course(...) &lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-14" target="XPpvTZwdT9hd0jFBfwsr-17" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1000" y="1050" as="sourcePoint" />
            <mxPoint x="1160" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XPpvTZwdT9hd0jFBfwsr-31" value="def create_runtime(...) &lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-14" target="XPpvTZwdT9hd0jFBfwsr-29" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1000" y="1050" as="sourcePoint" />
            <mxPoint x="1160" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-10" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Implement&lt;/font&gt;&lt;/b&gt; def _lookup_course(...)" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=-0.01;entryY=0.965;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-14" target="XPpvTZwdT9hd0jFBfwsr-21" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="330" y="817" as="sourcePoint" />
            <mxPoint x="1130" y="950" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-11" value="&lt;font color=&quot;#0000ff&quot;&gt;def&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;font color=&quot;#6666ff&quot;&gt;SplitMongoModuleStore .&lt;/font&gt;&lt;/span&gt;&lt;font color=&quot;#0000ff&quot;&gt;get_item(usage_key...)&amp;nbsp; &amp;nbsp; &amp;nbsp; ------------&amp;gt;&amp;nbsp; &amp;nbsp; E.g.:&lt;/font&gt;&lt;span style=&quot;background-color: initial; color: rgb(0, 0, 255);&quot;&gt;&amp;nbsp;descriptor = modulestore().get_item(usage_key)&lt;/span&gt;" style="swimlane;childLayout=stackLayout;horizontal=1;fillColor=#cce5ff;horizontalStack=1;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;strokeColor=#36393d;stackBorder=10;stackSpacing=-12;resizable=1;align=center;points=[];whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="425" y="1134.75" width="1070" height="120.5" as="geometry" />
        </mxCell>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-12" value="course_envelope =&amp;nbsp;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;_lookup_course&lt;/font&gt;&lt;/b&gt;(course_key)&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="lZ1_2r7MZ43qZYjNm-Xg-11" vertex="1">
          <mxGeometry x="10" y="33" width="190" height="77.5" as="geometry" />
        </mxCell>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-13" value="In method _load_items():&lt;div&gt;&amp;nbsp; &lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;create_runtime&lt;/font&gt;&lt;/b&gt;(course_envelope)&lt;div&gt;return &lt;b&gt;CachingDescriptorSystem&lt;/b&gt; instance&lt;/div&gt;&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="lZ1_2r7MZ43qZYjNm-Xg-11" vertex="1">
          <mxGeometry x="188" y="33" width="292" height="77.5" as="geometry" />
        </mxCell>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-14" value="Update &lt;b&gt;CachingDescriptorSystem&lt;/b&gt; .&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;module_data&lt;/font&gt;&lt;/b&gt;&amp;nbsp;&lt;div&gt;with&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;JSON loaded from&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;MongoDB&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;by &lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;cache_items(...)&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="lZ1_2r7MZ43qZYjNm-Xg-11" vertex="1">
          <mxGeometry x="468" y="33" width="312" height="77.5" as="geometry" />
        </mxCell>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-18" value="Return Descriptor from&lt;div&gt;&amp;nbsp;&lt;b&gt;CachingDescriptorSystem&lt;/b&gt;.&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;load_item&lt;/font&gt;&lt;/b&gt;(...)&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="lZ1_2r7MZ43qZYjNm-Xg-11" vertex="1">
          <mxGeometry x="768" y="33" width="292" height="77.5" as="geometry" />
        </mxCell>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-15" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Implement&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0.003;entryY=0.02;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-14" target="lZ1_2r7MZ43qZYjNm-Xg-11" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="690" y="941" as="sourcePoint" />
            <mxPoint x="850" y="940" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-19" value="&lt;font color=&quot;#0000ff&quot;&gt;def get_module(user, request, usage_key, field_data_cache, ...)&lt;/font&gt;" style="swimlane;childLayout=stackLayout;horizontal=1;fillColor=#cce5ff;horizontalStack=1;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;strokeColor=#36393d;stackBorder=10;stackSpacing=-12;resizable=1;align=center;points=[];whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="431" y="1284" width="1060" height="236" as="geometry" />
        </mxCell>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-20" value="descriptor =&amp;nbsp;&lt;div&gt;modulestore().&lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;get_item&lt;/font&gt;&lt;/b&gt;(usage_key)&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="lZ1_2r7MZ43qZYjNm-Xg-19" vertex="1">
          <mxGeometry x="10" y="33" width="220" height="193" as="geometry" />
        </mxCell>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-21" value="def &lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;get_module_for_descriptor&lt;/font&gt;&lt;/b&gt;(&lt;div&gt;user, request,&amp;nbsp;&lt;div&gt;descriptor,&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Descriptor&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;field_data_cache&lt;/font&gt;&lt;/b&gt;,&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;FieldDataCache&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;...)&lt;div&gt;call&amp;nbsp;def &lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#009900&quot;&gt;get_module_for_descriptor_internal&lt;/font&gt;&lt;/b&gt;(&lt;/div&gt;&lt;div&gt;user, descriptor, student_data...&lt;/div&gt;&lt;div&gt;):&lt;/div&gt;&lt;div&gt;(1) system, student_data = &lt;b&gt;&lt;font color=&quot;#00994d&quot;&gt;get_module_system_for_user&lt;/font&gt;&lt;/b&gt;(...):&lt;/div&gt;&lt;div&gt;(1.1)&amp;nbsp;set &lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;LmsFieldData&lt;/font&gt;&lt;/b&gt;(...,&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;field_data_cache&lt;/font&gt;&lt;/b&gt;) as `field-data` service&lt;/div&gt;&lt;div&gt;(2) set Descriptor to act as an XModule by bind_for_student(...)&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="lZ1_2r7MZ43qZYjNm-Xg-19" vertex="1">
          <mxGeometry x="218" y="33" width="432" height="193" as="geometry" />
        </mxCell>
        <UserObject label="1) Return instances of &lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;LmsModuleSystem&lt;/font&gt;&lt;/b&gt; and &lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;LmsFieldData&lt;/font&gt;&lt;/b&gt;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;from&amp;nbsp;&lt;/span&gt;&lt;div&gt;def &lt;b&gt;&lt;font color=&quot;#009900&quot;&gt;get_module_system_for_user&lt;/font&gt;&lt;/b&gt;(user, student_data, descriptor)&amp;nbsp;&lt;/div&gt;&lt;div&gt;2) In caller, bind them with &quot;descriptor.&lt;b&gt;bind_for_student&lt;/b&gt;(...)&quot;&lt;/div&gt;" tooltip="Source code : lms/djangoapps/courseware/module_render.py&#xa;&#xa;&#xa;def get_module_for_descriptor_internal(user, descriptor, student_data, course_id,  # pylint: disable=invalid-name&#xa;                                       track_function, xqueue_callback_url_prefix, request_token,&#xa;                                       position=None, wrap_xmodule_display=True, grade_bucket_type=None,&#xa;                                       static_asset_path=&#39;&#39;, user_location=None, disable_staff_debug_info=False,&#xa;                                       course=None):&#xa;    &quot;&quot;&quot;&#xa;    Actually implement get_module, without requiring a request.&#xa;&#xa;    See get_module() docstring for further details.&#xa;&#xa;    Arguments:&#xa;        request_token (str): A unique token for this request, used to isolate xblock rendering&#xa;    &quot;&quot;&quot;&#xa;&#xa;    (system, student_data) = get_module_system_for_user(&#xa;        user=user,&#xa;        student_data=student_data,  # These have implicit user bindings, the rest of args are considered not to&#xa;        descriptor=descriptor,&#xa;        course_id=course_id,&#xa;        track_function=track_function,&#xa;        xqueue_callback_url_prefix=xqueue_callback_url_prefix,&#xa;        position=position,&#xa;        wrap_xmodule_display=wrap_xmodule_display,&#xa;        grade_bucket_type=grade_bucket_type,&#xa;        static_asset_path=static_asset_path,&#xa;        user_location=user_location,&#xa;        request_token=request_token,&#xa;        disable_staff_debug_info=disable_staff_debug_info,&#xa;        course=course&#xa;    )&#xa;&#xa;    descriptor.bind_for_student(&#xa;        system,&#xa;        user.id,&#xa;        [&#xa;            partial(OverrideFieldData.wrap, user, course),&#xa;            partial(LmsFieldData, student_data=student_data),&#xa;        ],&#xa;    )&#xa;&#xa;    descriptor.scope_ids = descriptor.scope_ids._replace(user_id=user.id)&#xa;&#xa;" id="lZ1_2r7MZ43qZYjNm-Xg-22">
          <mxCell style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="lZ1_2r7MZ43qZYjNm-Xg-19" vertex="1">
            <mxGeometry x="638" y="33" width="412" height="193" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-23" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.005;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.005;entryY=0.977;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lZ1_2r7MZ43qZYjNm-Xg-19" target="lZ1_2r7MZ43qZYjNm-Xg-12" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="849" y="1290" as="sourcePoint" />
            <mxPoint x="1009" y="1290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#ff0000&quot;&gt;LmsFieldData&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;_authored_data:&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;KvsFieldData&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;_student_data:&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;KvsFieldData&amp;nbsp; &amp;nbsp; &amp;nbsp;// Access students data ( &lt;font color=&quot;#cccc00&quot;&gt;FieldDataCache&lt;/font&gt; ) in&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Mysql&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;_scope_mappings: dict&amp;nbsp; &amp;nbsp; &amp;nbsp;// &amp;lt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Scopes: FieldData instances&amp;gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;{&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&amp;nbsp; &amp;nbsp; Scope.content: authored_data,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&amp;nbsp; &amp;nbsp; Scope.settings: authored_data,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&amp;nbsp; &amp;nbsp; Scope.parent: authored_data,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&amp;nbsp; &amp;nbsp; Scope.children: authored_data,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&amp;nbsp; &amp;nbsp; Scope.user_state_summary: student_data,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&amp;nbsp; &amp;nbsp; Scope.user_state: student_data,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&amp;nbsp; &amp;nbsp; Scope.user_info: student_data,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&amp;nbsp; &amp;nbsp; Scope.preferences: student_data,&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;}&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" tooltip="Source code: lms/djangoapps/lms_xblock/field_data.py" id="lZ1_2r7MZ43qZYjNm-Xg-24">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="29" y="1281.5" width="360" height="248.5" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-25" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0.017;exitY=0.961;exitDx=0;exitDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lZ1_2r7MZ43qZYjNm-Xg-20" target="lZ1_2r7MZ43qZYjNm-Xg-24" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="620" y="1400" as="sourcePoint" />
            <mxPoint x="2080" y="1200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#9933ff&quot;&gt;LmsModuleSystem&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;- _services&lt;/span&gt;: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Supported: fs / completion / i18n / ...&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ publish: function&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Handle (&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;completion&amp;nbsp;&lt;/b&gt;/ &lt;b&gt;progress&lt;/b&gt;)&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;from Xmodule&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+ services: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Supported services ( i18n / / field-data / gating...)&amp;nbsp;&lt;/span&gt;&lt;/p&gt;+&amp;nbsp;descriptor_runtime:&amp;nbsp; &amp;nbsp;&lt;b&gt;&lt;font color=&quot;#b266ff&quot;&gt;DescriptorSystem&lt;/font&gt;&lt;/b&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handler_url(): Type&lt;/p&gt;" tooltip="Source code: lms/djangoapps/lms_xblock/runtime.py" id="lZ1_2r7MZ43qZYjNm-Xg-26">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="440" y="1577" width="402" height="97" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="lZ1_2r7MZ43qZYjNm-Xg-27" value="&lt;b&gt;&lt;font color=&quot;#cc0000&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;exitX=0.002;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lZ1_2r7MZ43qZYjNm-Xg-22" target="lZ1_2r7MZ43qZYjNm-Xg-26" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1699" y="1400" as="sourcePoint" />
            <mxPoint x="1859" y="1400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;class&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&amp;nbsp;&lt;font color=&quot;#9933ff&quot;&gt;PreviewModuleSystem&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;_services&lt;/span&gt;: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Supported: fs / ...&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handler_url(): str&lt;/p&gt;" tooltip="Source code: cms/djangoapps/contentstore/views/preview.py" id="bSISfmW-ia09FA_OU7SG-0">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="440" y="1727" width="402" height="90" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#b266ff&quot;&gt;ModuleSystem&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+ user_id: int&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;user_is_staff: bool&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;- _services&lt;/span&gt;: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Supported: fs / comletion / i18n /...&lt;br&gt;+ course_id: CourseKey&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ render_template: function&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp;takes (template_file, context) and returns rendered html&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;+ &lt;/font&gt;&lt;b style=&quot;color: rgb(0, 0, 255);&quot;&gt;get_module&lt;/b&gt;: function&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#009900&quot; style=&quot;font-size: 13px;&quot;&gt;get_module_for_descriptor_internal&lt;/font&gt;&lt;/b&gt;(...) :&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;takes a descriptor and returns a corresponding module instance object&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ filestore: OSFS&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;descriptor_runtime:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;DescriptorSystem&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handler_url(block, handler_name...): str&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;handle(block, handler_name, request, suffix=&#39;&#39;)&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 15px;&quot; color=&quot;#3333ff&quot;&gt;get_block&lt;/font&gt;&lt;/b&gt;: xmodule&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// call&amp;nbsp;&lt;/span&gt;&lt;b style=&quot;background-color: initial; color: rgb(0, 0, 255);&quot;&gt;get_module&amp;nbsp;&lt;/b&gt;---&amp;gt;&amp;nbsp;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot; color=&quot;#009900&quot;&gt;get_module_for_descriptor_internal&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;(descriptor, student_data, ...)&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;+ publish: function&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Handle (&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;completion&amp;nbsp;&lt;/b&gt;/&amp;nbsp;&lt;b&gt;progress&lt;/b&gt;)&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;from Xmodule&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" tooltip="Source code: cms/djangoapps/contentstore/views/preview.py&#xa;&#xa;&#xa;ModuleSystem objects are passed to x_modules to provide access to system functionality.&#xa;&#xa;&#xa;class ModuleSystem(MetricsMixin, ConfigurableFragmentWrapper, Runtime):&#xa;    @contract(descriptor_runtime=&#39;DescriptorSystem&#39;)&#xa;    def __init__(&#xa;            self, static_url, track_function, get_module, render_template,&#xa;            replace_urls, descriptor_runtime, user=None, filestore=None,&#xa;            debug=False, hostname=&quot;&quot;, xqueue=None, publish=None, node_path=&quot;&quot;,&#xa;            anonymous_student_id=&#39;&#39;, course_id=None,&#xa;            cache=None, can_execute_unsafe_code=None, replace_course_urls=None,&#xa;            replace_jump_to_id_urls=None, error_descriptor_class=None, get_real_user=None,&#xa;            field_data=None, get_user_role=None, rebind_noauth_module_to_user=None,&#xa;            user_location=None, get_python_lib_zip=None, **kwargs):&#xa;&#xa;It&#39;s kind of class Runtime.&#xa;&#xa;" id="bSISfmW-ia09FA_OU7SG-1">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;strokeColor=#CC0000;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="885" y="1557" width="606" height="273" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="bSISfmW-ia09FA_OU7SG-8" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="XPpvTZwdT9hd0jFBfwsr-14" target="XPpvTZwdT9hd0jFBfwsr-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="90" y="1099" as="sourcePoint" />
            <mxPoint x="250" y="1099" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-9" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-8" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-10" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-8" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;font color=&quot;#0000ff&quot;&gt;Access XBlock URL handle :&amp;nbsp; &amp;nbsp;^courses/{course_key}/xblock/{usage_key}/handler/(?P&amp;lt;handler&amp;gt;[^/]*)(?:/(?P&amp;lt;suffix&amp;gt;.*))?$&lt;/font&gt;" tooltip="" id="bSISfmW-ia09FA_OU7SG-11">
          <mxCell style="swimlane;childLayout=stackLayout;horizontal=1;fillColor=#fad9d5;horizontalStack=1;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;strokeColor=none;stackBorder=10;stackSpacing=-12;resizable=1;align=center;points=[];whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="2154" y="1030" width="960" height="130" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="bSISfmW-ia09FA_OU7SG-12" value="&lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;handle_xblock_callback&lt;/font&gt;&lt;/b&gt;(request, course_id,&amp;nbsp;&lt;div&gt;usage_id, handler, suffix)&lt;/div&gt;&lt;div&gt;&lt;u&gt;&lt;i&gt;CALL&lt;/i&gt;&lt;/u&gt;&amp;nbsp; ------&amp;gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;_invoke_xblock_handler&lt;/b&gt;(request, course_id, usage_id, handler, suffix, course_descriptor)&lt;br&gt;&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="bSISfmW-ia09FA_OU7SG-11" vertex="1">
          <mxGeometry x="10" y="33" width="280" height="87" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-13" value="&lt;b&gt;In _invoke_xblock_handler(...) :&lt;/b&gt;&lt;div&gt;1) module=get_module_by_usage_id(course_id, usage_id, course_descriptor, ...)&lt;/div&gt;&lt;div&gt;2) web_response = &lt;b&gt;module&lt;/b&gt;.handle(handler, req, suffix)&lt;br&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="bSISfmW-ia09FA_OU7SG-11" vertex="1">
          <mxGeometry x="278" y="33" width="342" height="87" as="geometry" />
        </mxCell>
        <UserObject label="1) &lt;b style=&quot;color: rgb(51, 51, 255);&quot;&gt;HandlersMixin&lt;/b&gt;.&lt;b style=&quot;color: rgb(51, 255, 51);&quot;&gt;handle&lt;/b&gt;(handler_name, request, suffix)&lt;div&gt;2) &lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;Runtime&lt;/font&gt;&lt;/b&gt;.handle(block, handler_name, request)&lt;/div&gt;" tooltip="Source : xblock/mixins.py&#xa;&#xa;&#xa;    def HandlersMixin.handle(self, handler_name, request, suffix=&#39;&#39;):&#xa;        &quot;&quot;&quot;Handle `request` with this block&#39;s runtime.&quot;&quot;&quot;&#xa;        return self.runtime.handle(self, handler_name, request, suffix)&#xa;&#xa;&#xa;&#xa;    def Runtime.handle(self, block, handler_name, request, suffix=&#39;&#39;):&#xa;        &quot;&quot;&quot;&#xa;        Handles any calls to the specified `handler_name`.&#xa;&#xa;        Provides a fallback handler if the specified handler isn&#39;t found.&#xa;&#xa;        :param handler_name: The name of the handler to call&#xa;        :param request: The request to handle&#xa;        :type request: webob.Request&#xa;        :param suffix: The remainder of the url, after the handler url prefix, if available&#xa;        &quot;&quot;&quot;&#xa;        handler = getattr(block, handler_name, None)&#xa;        if handler and getattr(handler, &#39;_is_xblock_handler&#39;, False):&#xa;            # Cache results of the handler call for later saving&#xa;            results = handler(request, suffix)&#xa;        else:&#xa;            fallback_handler = getattr(block, &quot;fallback_handler&quot;, None)&#xa;            if fallback_handler and getattr(fallback_handler, &#39;_is_xblock_handler&#39;, False):&#xa;                # Cache results of the handler call for later saving&#xa;                results = fallback_handler(handler_name, request, suffix)&#xa;            else:&#xa;                raise NoSuchHandlerError(&quot;Couldn&#39;t find handler %r for %r&quot; % (handler_name, block))&#xa;&#xa;        # Write out dirty fields&#xa;        block.save()&#xa;        return results&#xa;&#xa;&#xa;" id="bSISfmW-ia09FA_OU7SG-14">
          <mxCell style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;strokeColor=default;" parent="bSISfmW-ia09FA_OU7SG-11" vertex="1">
            <mxGeometry x="608" y="33" width="342" height="87" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;i&gt;[XBlock] //&lt;/i&gt;&lt;b&gt;&amp;nbsp; class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;HandlersMixin&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;_services&lt;/span&gt;: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Supported: fs / ...&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ json_handler(func): Type&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;handler(func): Type&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#00ff00&quot;&gt;handle&lt;/font&gt;&lt;/b&gt;(handler_name, request, suffix): Type&lt;/p&gt;" tooltip="Source code: xblock/mixins.py&#xa;&#xa;&#xa;class HandlersMixin(object):&#xa;    &quot;&quot;&quot;&#xa;    A mixin provides all of the machinery needed for working with XBlock-style handlers.&#xa;    &quot;&quot;&quot;&#xa;&#xa;    def handle(self, handler_name, request, suffix=&#39;&#39;):&#xa;        &quot;&quot;&quot;Handle `request` with this block&#39;s runtime.&quot;&quot;&quot;&#xa;        return self.runtime.handle(self, handler_name, request, suffix)&#xa;&#xa;    ......&#xa;&#xa;" id="bSISfmW-ia09FA_OU7SG-15">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;strokeColor=#67AB9F;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="1615" y="873" width="361" height="120" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;i&gt;[XBlock]&lt;/i&gt;&lt;b&gt;&amp;nbsp; // class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;XBlock&lt;/font&gt;&amp;nbsp;&lt;/b&gt;( ..., HandlersMixin,...)&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+_services&lt;/span&gt;: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Supported: fs / ...&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+runtime: function&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Subclass of DescriptorSystem&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;_field_data: FieldData.&amp;nbsp; &amp;nbsp; &amp;nbsp;// Contain&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#ff0000&quot;&gt;LmsFieldData&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ json_handler(func): Type&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;handler(func): Type&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#33ff33&quot;&gt;handle&lt;/font&gt;&lt;/b&gt;(handler_name, request,...): Type&amp;nbsp; // Call runtime.handle&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;studio_view&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;(_context): str&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 255); background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 255); background-color: initial;&quot;&gt;&lt;b&gt;student_view&lt;/b&gt;(context) : str&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" tooltip="Source code: xblock/core.py&#xa;&#xa;&#xa;class XBlock(XmlSerializationMixin, HierarchyMixin, ScopedStorageMixin, RuntimeServicesMixin, HandlersMixin,&#xa;             IndexInfoMixin, ViewsMixin, SharedBlockBase):&#xa;    ......&#xa;    def render(self, view, context=None):&#xa;        &quot;&quot;&quot;Render `view` with this block&#39;s runtime and the supplied `context`&quot;&quot;&quot;&#xa;        return self.runtime.render(self, view, context)&#xa;&#xa;&#xa;&#xa;" id="bSISfmW-ia09FA_OU7SG-16">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;strokeColor=#67AB9F;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="1615" y="1019" width="361" height="171" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;i&gt;[XBlock&lt;/i&gt;&lt;b&gt;] //&amp;nbsp; class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 18px;&quot; color=&quot;#9933ff&quot;&gt;Runtime&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;construct_xblock(block_type...): Type&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ &lt;b&gt;&lt;font color=&quot;#9933ff&quot;&gt;construct_xblock_from_class&lt;/font&gt;&lt;/b&gt;(cls, ...): a Mixed class supported &lt;b&gt;&lt;font color=&quot;#00ff80&quot;&gt;XBlock.handle&lt;/font&gt;&lt;/b&gt;(handler_name,...)&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+ &lt;b&gt;&lt;font color=&quot;#33ff33&quot;&gt;handle&lt;/font&gt;&lt;/b&gt;(block, handler_name, request, suffix=&#39;&#39;)&lt;/span&gt;&lt;br&gt;&lt;/p&gt;" tooltip="Source code: xblock/runtime.py&#xa;&#xa;&#xa;&#xa;class Runtime(six.with_metaclass(ABCMeta, object)):&#xa;    &quot;&quot;&quot;&#xa;    Access to the runtime environment for XBlocks.&#xa;    &quot;&quot;&quot;&#xa;    ......&#xa;&#xa;    def construct_xblock_from_class(self, cls, scope_ids, field_data=None, *args, **kwargs):&#xa;        &quot;&quot;&quot;&#xa;        Construct a new xblock of type cls, mixing in the mixins&#xa;        defined for this application.&#xa;        &quot;&quot;&quot;&#xa;        return self.mixologist.mix(cls)(&#xa;            runtime=self,&#xa;            field_data=field_data,&#xa;            scope_ids=scope_ids,&#xa;            *args, **kwargs&#xa;        )&#xa;&#xa;    def handle(self, block, handler_name, request, suffix=&#39;&#39;):&#xa;        &quot;&quot;&quot;&#xa;        Handles any calls to the specified `handler_name`.&#xa;&#xa;        Provides a fallback handler if the specified handler isn&#39;t found.&#xa;&#xa;        :param handler_name: The name of the handler to call&#xa;        :param request: The request to handle&#xa;        :type request: webob.Request&#xa;        :param suffix: The remainder of the url, after the handler url prefix, if available&#xa;        &quot;&quot;&quot;&#xa;        handler = getattr(block, handler_name, None)&#xa;        if handler and getattr(handler, &#39;_is_xblock_handler&#39;, False):&#xa;            # Cache results of the handler call for later saving&#xa;            results = handler(request, suffix)&#xa;        else:&#xa;            fallback_handler = getattr(block, &quot;fallback_handler&quot;, None)&#xa;            if fallback_handler and getattr(fallback_handler, &#39;_is_xblock_handler&#39;, False):&#xa;                # Cache results of the handler call for later saving&#xa;                results = fallback_handler(handler_name, request, suffix)&#xa;            else:&#xa;                raise NoSuchHandlerError(&quot;Couldn&#39;t find handler %r for %r&quot; % (handler_name, block))&#xa;&#xa;        # Write out dirty fields&#xa;        block.save()&#xa;        return results&#xa;        ......&#xa;&#xa;&#xa;&#xa;&#xa;" id="bSISfmW-ia09FA_OU7SG-20">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;strokeColor=#67AB9F;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="1435.25" y="758" width="563.75" height="92" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;font color=&quot;#0000ff&quot;&gt;def&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#9933ff&quot;&gt;construct_xblock_from_class&lt;/font&gt;&lt;font color=&quot;#0000ff&quot;&gt;(block_class...) /&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 255); text-align: left;&quot;&gt;construct_xblock(block_type...)&lt;/span&gt;" tooltip="Source code: xblock/runtime.py" id="bSISfmW-ia09FA_OU7SG-21">
          <mxCell style="swimlane;childLayout=stackLayout;horizontal=1;fillColor=#cce5ff;horizontalStack=1;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;strokeColor=#36393d;stackBorder=10;stackSpacing=-12;resizable=1;align=center;points=[];whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="2157" y="1190" width="660" height="100" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="bSISfmW-ia09FA_OU7SG-22" value="&lt;b&gt;&lt;i&gt;&lt;font color=&quot;#3333ff&quot;&gt;Runtime&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;.mixologist =&lt;div&gt;Mixologist(&lt;span style=&quot;text-align: left;&quot;&gt;settings.&lt;/span&gt;&lt;span style=&quot;text-align: left; background-color: initial;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;u&gt;XBLOCK_MIXINS&lt;/u&gt;&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;)&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="bSISfmW-ia09FA_OU7SG-21" vertex="1">
          <mxGeometry x="10" y="33" width="270" height="57" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-23" value="Mix &#39;block_class&#39; with classes&amp;nbsp;&lt;div&gt;defined in&amp;nbsp;&lt;b style=&quot;background-color: initial; text-align: left;&quot;&gt;XBLOCK_MIXINS&lt;/b&gt;&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="bSISfmW-ia09FA_OU7SG-21" vertex="1">
          <mxGeometry x="268" y="33" width="212" height="57" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-24" value="New instance of this new&amp;nbsp;&lt;div&gt;mixed &#39;block_class&#39;&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="bSISfmW-ia09FA_OU7SG-21" vertex="1">
          <mxGeometry x="468" y="33" width="182" height="57" as="geometry" />
        </mxCell>
        <UserObject label="&lt;div&gt;Edx-Platform / &lt;u&gt;Settings.py&lt;/u&gt;&amp;nbsp; :&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;i&gt;settings&lt;/i&gt;.&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;u&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;XBLOCK_MIXINS&lt;/font&gt;&lt;/u&gt;&lt;/b&gt; = (&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#66ff66&quot;&gt;XModuleMixin&lt;/font&gt;&lt;/b&gt;,&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;LmsBlockMixin,&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;InheritanceMixin&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;,...)&lt;/span&gt;&lt;/div&gt;" tooltip="Source code: &#xa; - lms/envs/common.py&#xa; - cms/envs/common.py" id="bSISfmW-ia09FA_OU7SG-25">
          <mxCell style="label;fontStyle=0;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;whiteSpace=wrap;html=1;image=img/clipart/Gear_128x128.png;dashed=1;strokeWidth=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="2157" y="1321" width="503" height="70" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="bSISfmW-ia09FA_OU7SG-27" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=-0.012;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.012;entryY=0.086;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-22" target="bSISfmW-ia09FA_OU7SG-25" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1966.5" y="1336" as="sourcePoint" />
            <mxPoint x="2126.5" y="1336" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-28" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Implements&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0.003;entryY=0.04;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-20" target="bSISfmW-ia09FA_OU7SG-21" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1925.5" y="1332" as="sourcePoint" />
            <mxPoint x="2275" y="1134.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;class&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&amp;nbsp;&lt;font color=&quot;#0000ff&quot;&gt;XModuleMixin&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;( XBlock,...)&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;+&amp;nbsp;&lt;b&gt;_runtime&lt;/b&gt;:&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;DescriptorSystem&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;xmodule_runtime&lt;/b&gt;:&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;ModuleSystem&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;hr style=&quot;border-style: solid;&quot; size=&quot;1&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+runtime() :&amp;nbsp;&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#b266ff&quot;&gt;CombinedSystem&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;(&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;xmodule_runtime&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;, &lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;_runtime&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+system():&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b style=&quot;color: rgb(178, 102, 255);&quot;&gt;CombinedSystem&lt;/b&gt;&lt;font color=&quot;#b3ff66&quot;&gt; //&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#b3ff66&quot;&gt;backwards compatibility alias provided for XModules&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;+&lt;b&gt;&lt;font style=&quot;font-size: 17px;&quot; color=&quot;#6666ff&quot;&gt;&lt;i&gt;bind_for_student&lt;/i&gt;&lt;/font&gt;&lt;/b&gt;(xmodule_runtime, user_id, wrappers): None&lt;/p&gt;" tooltip="Source code: common/lib/xmodule/xmodule/x_module.py&#xa;&#xa;&#xa;class XModuleMixin(XModuleFields, XBlock):&#xa;&#xa;    def bind_for_student(self, xmodule_runtime, user_id, wrappers=None):&#xa;        &quot;&quot;&quot;&#xa;        Set up this XBlock to act as an XModule instead of an XModuleDescriptor.&quot;&quot;&quot;&#xa;        if self.scope_ids.user_id is not None and user_id == self.scope_ids.user_id:&#xa;            if getattr(xmodule_runtime, &#39;position&#39;, None):&#xa;                self.position = xmodule_runtime.position   # update the position of the tab&#xa;            return&#xa;&#xa;        # If we are switching users mid-request, save the data from the old user.&#xa;        self.save()&#xa;&#xa;        # Update scope_ids to point to the new user.&#xa;        self.scope_ids = self.scope_ids._replace(user_id=user_id)&#xa;&#xa;        # Clear out any cached instantiated children.&#xa;        self.clear_child_cache()&#xa;&#xa;        # Clear out any cached field data scoped to the old user.&#xa;        for field in self.fields.values():&#xa;            if field.scope in (Scope.parent, Scope.children):&#xa;                continue&#xa;&#xa;            if field.scope.user == UserScope.ONE:&#xa;                field._del_cached_value(self)  # pylint: disable=protected-access&#xa;                # not the most elegant way of doing this, but if we&#39;re removing&#xa;                # a field from the module&#39;s field_data_cache, we should also&#xa;                # remove it from its _dirty_fields&#xa;                if field in self._dirty_fields:&#xa;                    del self._dirty_fields[field]&#xa;&#xa;        # Set the new xmodule_runtime and field_data (which are user-specific)&#xa;        self.xmodule_runtime = xmodule_runtime&#xa;&#xa;        if wrappers is None:&#xa;            wrappers = []&#xa;&#xa;        wrapped_field_data = self._unwrapped_field_data&#xa;        for wrapper in wrappers:&#xa;            wrapped_field_data = wrapper(wrapped_field_data)&#xa;&#xa;        self._field_data = wrapped_field_data&#xa;&#xa;    @property&#xa;    def runtime(self):&#xa;        return CombinedSystem(self.xmodule_runtime, self._runtime)&#xa;&#xa;    @runtime.setter&#xa;    def runtime(self, value):&#xa;        self._runtime = value&#xa;&#xa;    @property&#xa;    def system(self):&#xa;        &quot;&quot;&quot;&#xa;        Return the XBlock runtime (backwards compatibility alias provided for XModules).&#xa;        &quot;&quot;&quot;&#xa;        return self.runtime&#xa;&#xa;    ......&#xa;&#xa;&#xa;&#xa;&#xa;" id="bSISfmW-ia09FA_OU7SG-29">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;strokeColor=#FF3333;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="1616.75" y="1217" width="357.5" height="163" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;XModule&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ &lt;b&gt;descriptor&lt;/b&gt;:&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;Descriptor&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;_runtime:&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;DescriptorSystem&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ &lt;b&gt;&lt;font color=&quot;#9933ff&quot;&gt;runtime&lt;/font&gt;&lt;/b&gt;():&amp;nbsp;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#b266ff&quot;&gt;CombinedSystem&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b style=&quot;&quot;&gt;student_view&lt;/b&gt;(context) : str&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" tooltip="Source code: common/lib/xmodule/xmodule/x_module.py&#xa;&#xa;&#xa;class XModule(HTMLSnippet, XModuleMixin):&#xa;&#xa;    def student_view(self, context):&#xa;        &quot;&quot;&quot;&#xa;        Return a fragment with the html from this XModule&#xa;&#xa;        Doesn&#39;t yet add any of the javascript to the fragment, nor the css.&#xa;        Also doesn&#39;t expect any javascript binding, yet.&#xa;&#xa;        Makes no use of the context parameter&#xa;        &quot;&quot;&quot;&#xa;        return Fragment(self.get_html())&#xa;&#xa;    ......&#xa;&#xa;" id="bSISfmW-ia09FA_OU7SG-33">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;strokeColor=#FF3333;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="1887.5" y="1425" width="208.5" height="115" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;XModuleDescriptor&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ module_class:&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;XModule&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;xmodule_runtime: ModuleSystem&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ &lt;b&gt;_xmodule&lt;/b&gt;():&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;XModule&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+ &lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#9933ff&quot;&gt;runtime&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;():&amp;nbsp;&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#b266ff&quot;&gt;CombinedSystem&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;div&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;studio_view&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;(_context): str&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" tooltip="Source : common/lib/xmodule/xmodule/x_module.py&#xa;&#xa;&#xa;class XModuleDescriptor(HTMLSnippet, ResourceTemplates, XModuleMixin):&#xa;&#xa;    def studio_view(self, _context):&#xa;        &quot;&quot;&quot;&#xa;        Return a fragment with the html from this XModuleDescriptor&#39;s editing view&#xa;&#xa;        Doesn&#39;t yet add any of the javascript to the fragment, nor the css.&#xa;        Also doesn&#39;t expect any javascript binding, yet.&#xa;&#xa;        Makes no use of the context parameter&#xa;        &quot;&quot;&quot;&#xa;        return Fragment(self.get_html())&#xa;&#xa;    ......&#xa;&#xa;" id="bSISfmW-ia09FA_OU7SG-34">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;strokeColor=#FF3333;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="1888.5" y="1564" width="208.5" height="126" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="bSISfmW-ia09FA_OU7SG-35" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=0.652;exitY=1.008;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-29" target="bSISfmW-ia09FA_OU7SG-34" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1521" y="1540" as="sourcePoint" />
            <mxPoint x="1681" y="1540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-36" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-35" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-37" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-35" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-38" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-29" target="bSISfmW-ia09FA_OU7SG-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1931" y="1540" as="sourcePoint" />
            <mxPoint x="2091" y="1540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-39" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-38" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-40" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-38" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#b266ff&quot;&gt;DescriptorSystem&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ &lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;load_item&lt;/font&gt;&lt;/b&gt;: function&amp;nbsp; &amp;nbsp; &amp;nbsp;// In Subclass of&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;b style=&quot;color: rgb(178, 102, 255);&quot;&gt;CachingDescriptorSystem&lt;/b&gt;&lt;font color=&quot;#ffffff&quot;&gt;, it refer to _load_item(...)&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ get_block(self, usage_id...): Descriptor&lt;/p&gt;" tooltip="Source : common/lib/xmodule/xmodule/x_module.py&#xa;&#xa;&#xa;It&#39;s to be used with :class:`XModuleDescriptor`&#xa;&#xa;&#xa;class DescriptorSystem(MetricsMixin, ConfigurableFragmentWrapper, Runtime):&#xa;    ......&#xa;&#xa;&#xa;It&#39;s kind of class Runtime .&#xa;" id="bSISfmW-ia09FA_OU7SG-42">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;strokeColor=#FF3333;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="1435.25" y="628" width="565.75" height="90" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="bSISfmW-ia09FA_OU7SG-43" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;MakoDescriptorSystem&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ render_template: function of rendering&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;+&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;construct_xblock_from_class&lt;/font&gt;&lt;/b&gt;(cls, ...): a Mixed class supported&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#00ff80&quot;&gt;XBlock.handle&lt;/font&gt;&lt;/b&gt;(handler_name,...)&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1413.13" y="497.5" width="610" height="82.5" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-44" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-20" target="bSISfmW-ia09FA_OU7SG-42" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1925" y="1097.5" as="sourcePoint" />
            <mxPoint x="1718.125" y="763" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-45" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-44" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="-206" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-46" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-44" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-47" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-42" target="bSISfmW-ia09FA_OU7SG-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1718.125" y="584" as="sourcePoint" />
            <mxPoint x="2390" y="686" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-48" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-47" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-49" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-47" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-50" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-43" target="XPpvTZwdT9hd0jFBfwsr-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1620" y="929.5" as="sourcePoint" />
            <mxPoint x="1780" y="929.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-51" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-50" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-52" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="bSISfmW-ia09FA_OU7SG-50" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bSISfmW-ia09FA_OU7SG-53" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.497;exitY=0.977;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.998;entryY=0.01;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-14" target="bSISfmW-ia09FA_OU7SG-21" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="2134" y="1256" as="sourcePoint" />
            <mxPoint x="2294" y="1256" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-0" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.25;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-1" target="lZ1_2r7MZ43qZYjNm-Xg-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-65" y="1921" as="sourcePoint" />
            <mxPoint x="95" y="1921" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-1" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-0" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-2" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-0" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-3" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=1;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-1" target="bSISfmW-ia09FA_OU7SG-0" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-5" y="1931" as="sourcePoint" />
            <mxPoint x="155" y="1931" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-4" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-3" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-5" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-3" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&lt;b&gt;&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;XmlDescriptor&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ resources_dir: str&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ export_to_xml(): str&lt;/p&gt;" tooltip="Source: common/lib/xmodule/xmodule/x_module.py&#xa;&#xa;&#xa;class XmlDescriptor(XmlParserMixin, XModuleDescriptor):&#xa;    ......&#xa;&#xa;" id="WCvGNAh7fgvQHPrr3F-r-6">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;strokeColor=#FFE6CC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="1885.75" y="1733" width="214" height="90" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-7" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-34" target="WCvGNAh7fgvQHPrr3F-r-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1562" y="1678" as="sourcePoint" />
            <mxPoint x="1722" y="1678" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-8" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-7" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-9" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-7" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-10" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;u&gt;Plugin&lt;/u&gt;:&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;SequenceDescriptor&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ resources_dir: str&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ export_to_xml(): str&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2163" y="1895" width="220" height="90" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-11" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=1;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WCvGNAh7fgvQHPrr3F-r-6" target="WCvGNAh7fgvQHPrr3F-r-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1017" y="1666" as="sourcePoint" />
            <mxPoint x="1177" y="1666" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-12" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-11" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-13" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-11" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-14" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;u&gt;Plugin&lt;/u&gt;:&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;PollDescriptor&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ module_class: subclass of XModule&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ definition_to_xml(): str&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2163" y="1778" width="220" height="90" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-15" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;u&gt;Plugin&lt;/u&gt;:&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;PollModule&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ descriptor: subclass of Descriptor&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle_ajax():&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;str&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2159.25" y="1539" width="223.75" height="90" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-16" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-33" target="WCvGNAh7fgvQHPrr3F-r-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1917" y="1716" as="sourcePoint" />
            <mxPoint x="2077" y="1716" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-17" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-16" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-18" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-16" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-19" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WCvGNAh7fgvQHPrr3F-r-6" target="WCvGNAh7fgvQHPrr3F-r-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1017" y="1726" as="sourcePoint" />
            <mxPoint x="1127" y="1657" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-20" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-19" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-21" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-19" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-22" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;u&gt;Plugin&lt;/u&gt;: &lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;PollModule&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ descriptor: subclass of Descriptor&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle_ajax():&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;str&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2159.25" y="1429" width="223.75" height="90" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-23" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-33" target="WCvGNAh7fgvQHPrr3F-r-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2027" y="1706" as="sourcePoint" />
            <mxPoint x="2187" y="1706" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-24" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-23" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-25" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-23" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-28" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-15" target="bSISfmW-ia09FA_OU7SG-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1654" y="1017" as="sourcePoint" />
            <mxPoint x="1772.5" y="1007" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-29" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-28" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-30" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-28" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-31" value="&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;Use&lt;/b&gt;&lt;/font&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;entryX=1;entryY=1;entryDx=0;entryDy=0;exitX=0.01;exitY=0.1;exitDx=0;exitDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-25" target="bSISfmW-ia09FA_OU7SG-29" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="2200" y="1320" as="sourcePoint" />
            <mxPoint x="2134" y="1000" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-32" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-16" target="bSISfmW-ia09FA_OU7SG-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1549" y="1239" as="sourcePoint" />
            <mxPoint x="1709" y="1239" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-33" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-32" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-34" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-32" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-35" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;u&gt;Plugin&lt;/u&gt;:&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;MakoModuleDescriptor&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ descriptor: subclass of Descriptor&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ handle_ajax():&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;str&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2163" y="1659" width="223.75" height="90" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-36" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-34" target="WCvGNAh7fgvQHPrr3F-r-35" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1827" y="1647" as="sourcePoint" />
            <mxPoint x="1987" y="1647" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-37" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-36" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-38" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-36" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-39" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;exitX=0.147;exitY=0.983;exitDx=0;exitDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-20" target="bSISfmW-ia09FA_OU7SG-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1655" y="1240" as="sourcePoint" />
            <mxPoint x="1815" y="1240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-40" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-39" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="-206" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-41" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="WCvGNAh7fgvQHPrr3F-r-39" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WCvGNAh7fgvQHPrr3F-r-43" value="&lt;font color=&quot;#ff3333&quot;&gt;&lt;b&gt;Use&lt;/b&gt;&lt;/font&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-29" target="WCvGNAh7fgvQHPrr3F-r-42" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1761" y="1440" as="sourcePoint" />
            <mxPoint x="1921" y="1440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="N4uoPhiA4U3riLwmGXqs-1" value="" style="group;strokeWidth=10;strokeColor=#9933FF;dashed=1;dashPattern=1 1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1" connectable="0">
          <mxGeometry x="1555" y="1427" width="280" height="443" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;i&gt;class&lt;/i&gt;&lt;b&gt;&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#9933ff&quot;&gt;CombinedSystem&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ _module_system:&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;ModuleSystem&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;_descriptor_system:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;DescriptorSystem&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ service():&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;return service from runtimes&lt;/span&gt;&lt;/p&gt;" tooltip="Source code : common/lib/xmodule/xmodule/x_module.py&#xa;&#xa;&#xa;&#xa;    This class is a shim to allow both pure XBlocks and XModuleDescriptors&#xa;    that have been bound as XModules to access both the attributes of ModuleSystem&#xa;    and of DescriptorSystem as a single runtime.&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;    def __init__(self, module_system, descriptor_system):&#xa;        # These attributes are set directly to __dict__ below to avoid a recursion in getattr/setattr.&#xa;        self._module_system = module_system&#xa;        self._descriptor_system = descriptor_system&#xa;&#xa;&#xa;&#xa;    def __getattr__(self, name):&#xa;        &quot;&quot;&quot;&#xa;        If the ModuleSystem doesn&#39;t have an attribute, try returning the same attribute from the&#xa;        DescriptorSystem, instead. This allows XModuleDescriptors that are bound as XModules&#xa;        to still function as XModuleDescriptors.&#xa;        &quot;&quot;&quot;&#xa;        # First we try a lookup in the module system...&#xa;        try:&#xa;            return getattr(self._module_system, name)&#xa;        except AttributeError:&#xa;            return getattr(self._descriptor_system, name)&#xa;&#xa;&#xa;&#xa;" id="WCvGNAh7fgvQHPrr3F-r-42">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="N4uoPhiA4U3riLwmGXqs-1" vertex="1">
            <mxGeometry x="41" y="59" width="224" height="90" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="N4uoPhiA4U3riLwmGXqs-0" value="How we assemble&amp;nbsp; &amp;nbsp; ModuleSystem&amp;nbsp; +&amp;nbsp; DescriptorSystem" style="swimlane;horizontal=0;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;strokeColor=#0000FF;strokeWidth=2;" parent="N4uoPhiA4U3riLwmGXqs-1" vertex="1">
          <mxGeometry x="10" y="31" width="266" height="380" as="geometry" />
        </mxCell>
        <mxCell id="N4uoPhiA4U3riLwmGXqs-2" value="1) Set &#39;&lt;span style=&quot;text-align: left; text-wrap: wrap;&quot;&gt;&lt;b&gt;_descriptor_system&lt;/b&gt;&#39; refered to&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;text-align: left; text-wrap: wrap;&quot;&gt;&#39;XModuleMixin._runtime&#39; in function&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(153, 51, 255); font-weight: 700; text-align: left; text-wrap: wrap;&quot;&gt;construct_xblock_from_class( )&lt;/span&gt;&lt;span style=&quot;text-align: left; text-wrap: wrap;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="N4uoPhiA4U3riLwmGXqs-0" vertex="1">
          <mxGeometry x="26" y="158" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="N4uoPhiA4U3riLwmGXqs-3" value="2) Set &#39;&lt;span style=&quot;text-align: left; text-wrap: wrap;&quot;&gt;&lt;b&gt;_module_system&lt;/b&gt;&#39; refered to&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;text-wrap: wrap;&quot;&gt;&#39;XModuleMixin.&amp;nbsp;xmodule_runtime&#39;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;text-wrap: wrap;&quot;&gt;in method&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;text-align: left; text-wrap: wrap;&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;XModuleMixin.&lt;/font&gt;&lt;/b&gt;&lt;b style=&quot;background-color: initial; text-wrap: wrap; text-align: left;&quot;&gt;&lt;font color=&quot;#0000ff&quot;&gt;&amp;nbsp;bind_for_student( )&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial; text-wrap: wrap; text-align: left;&quot;&gt;called by function&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial; text-align: center; text-wrap: wrap;&quot;&gt;&lt;font color=&quot;#009900&quot;&gt;get_module_for_descriptor_internal( )&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial; text-align: center; text-wrap: wrap;&quot;&gt;&lt;font color=&quot;#009900&quot;&gt;&amp;lt;----- get_module(...)&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="N4uoPhiA4U3riLwmGXqs-0" vertex="1">
          <mxGeometry x="26" y="251" width="240" height="110" as="geometry" />
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-0" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;u&gt;Plugin&lt;/u&gt;: &lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;ScormXBlock&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2155" y="900" width="223.75" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-1" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;u&gt;Plugin&lt;/u&gt;: &lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;ILTXBlock&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2155" y="960" width="223.75" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-2" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;u&gt;Plugin&lt;/u&gt;: &lt;b&gt;class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;PdfBlock&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2155" y="840" width="223.75" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-3" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-16" target="KoLSAgjciGVr8KhCSaoN-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2090" y="1050" as="sourcePoint" />
            <mxPoint x="2250" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-4" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="KoLSAgjciGVr8KhCSaoN-3" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-5" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="KoLSAgjciGVr8KhCSaoN-3" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-6" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-16" target="KoLSAgjciGVr8KhCSaoN-0" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2090" y="1150" as="sourcePoint" />
            <mxPoint x="2250" y="1150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-7" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="KoLSAgjciGVr8KhCSaoN-6" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-8" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="KoLSAgjciGVr8KhCSaoN-6" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-9" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="bSISfmW-ia09FA_OU7SG-16" target="KoLSAgjciGVr8KhCSaoN-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2090" y="1150" as="sourcePoint" />
            <mxPoint x="2250" y="1150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-10" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="KoLSAgjciGVr8KhCSaoN-9" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-11" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="KoLSAgjciGVr8KhCSaoN-9" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KoLSAgjciGVr8KhCSaoN-12" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;students data&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Mysql&lt;/font&gt;&lt;/b&gt;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;strokeWidth=5;strokeColor=#3333FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="285" y="1412" width="90" height="101" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&lt;b&gt;&amp;nbsp;&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#cccc00&quot; style=&quot;font-size: 15px;&quot;&gt;FieldDataCache&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;font color=&quot;#cccc00&quot;&gt;(Mysql: student data)&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+ course_did&lt;/span&gt;: CourseKey&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ user: User&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ read_only: bool&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ cache: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // &amp;lt;Scope.&quot;type&quot;:&amp;nbsp; ???Cache(&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;to Mysq&lt;/font&gt;&lt;/b&gt;l)&amp;gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;scorable_locations: set&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ add_descriptors_to_cache(descriptors)(): None&lt;/p&gt;" tooltip="Source code: lms/djangoapps/courseware/model_data.py&#xa;&#xa;&#xa;    A cache of django model objects needed to supply the data&#xa;    for a module and its descendants&#xa;&#xa;&#xa;class FieldDataCache(object):&#xa;    def __init__(self, descriptors, course_id, user, asides=None, read_only=False):&#xa;        if asides is None:&#xa;            self.asides = []&#xa;        else:&#xa;            self.asides = asides&#xa;&#xa;        assert isinstance(course_id, CourseKey)&#xa;        self.course_id = course_id&#xa;        self.user = user&#xa;        self.read_only = read_only&#xa;&#xa;        self.cache = {&#xa;            Scope.user_state: UserStateCache(&#xa;                self.user,&#xa;                self.course_id,&#xa;            ),&#xa;            Scope.user_info: UserInfoCache(&#xa;                self.user,&#xa;            ),&#xa;            Scope.preferences: PreferencesCache(&#xa;                self.user,&#xa;            ),&#xa;            Scope.user_state_summary: UserStateSummaryCache(&#xa;                self.course_id,&#xa;            ),&#xa;        }&#xa;        self.scorable_locations = set()&#xa;        self.add_descriptors_to_cache(descriptors)&#xa;&#xa;    def add_descriptors_to_cache(self, descriptors):&#xa;        &quot;&quot;&quot;&#xa;        Add all `descriptors` to this FieldDataCache.&#xa;        &quot;&quot;&quot;&#xa;        if self.user.is_authenticated:&#xa;            self.scorable_locations.update(desc.location for desc in descriptors if desc.has_score)&#xa;            for scope, fields in self._fields_to_cache(descriptors).items():&#xa;                if scope not in self.cache:&#xa;                    continue&#xa;&#xa;                self.cache[scope].cache_fields(fields, descriptors, self.asides)&#xa;&#xa;......&#xa;&#xa;&#xa;&#xa;&#xa;" id="zAeGjUYxotYikVKDRhqf-0">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="29" y="1560" width="321" height="162" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="zAeGjUYxotYikVKDRhqf-1" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;entryX=1;entryY=0;entryDx=0;entryDy=0;exitX=0.007;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lZ1_2r7MZ43qZYjNm-Xg-21" target="zAeGjUYxotYikVKDRhqf-0" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="480" y="1500" as="sourcePoint" />
            <mxPoint x="640" y="1500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zAeGjUYxotYikVKDRhqf-2" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lZ1_2r7MZ43qZYjNm-Xg-24" target="zAeGjUYxotYikVKDRhqf-0" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="210" y="1539" as="sourcePoint" />
            <mxPoint x="370" y="1539" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;font color=&quot;#3333ff&quot;&gt;def get_module_for_student(student, usage_key, request=None, course=None)&lt;/font&gt;" tooltip="Source: lms/djangoapps/instructor/utils.py&#xa;&#xa;&#xa;&#xa;&#xa;" id="zAeGjUYxotYikVKDRhqf-3">
          <mxCell style="swimlane;childLayout=stackLayout;horizontal=1;fillColor=#b1ddf0;horizontalStack=1;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;strokeColor=none;stackBorder=10;stackSpacing=-12;resizable=1;align=center;points=[];whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="25" y="1907" width="930" height="100" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="zAeGjUYxotYikVKDRhqf-4" value="descriptor = modulestore().get_item(usage_key, depth=0)" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="zAeGjUYxotYikVKDRhqf-3" vertex="1">
          <mxGeometry x="10" y="33" width="320" height="57" as="geometry" />
        </mxCell>
        <mxCell id="zAeGjUYxotYikVKDRhqf-5" value="field_data_cache = &lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;FieldDataCache&lt;/font&gt;&lt;/b&gt;(&lt;div&gt;[descriptor], usage_key.course_key, student)&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="zAeGjUYxotYikVKDRhqf-3" vertex="1">
          <mxGeometry x="318" y="33" width="282" height="57" as="geometry" />
        </mxCell>
        <mxCell id="zAeGjUYxotYikVKDRhqf-6" value="return &lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;get_module&lt;/font&gt;&lt;/b&gt;(student, request, usage_key, field_data_cache, course=course)" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="zAeGjUYxotYikVKDRhqf-3" vertex="1">
          <mxGeometry x="588" y="33" width="332" height="57" as="geometry" />
        </mxCell>
        <mxCell id="zAeGjUYxotYikVKDRhqf-7" value="&lt;b&gt;Use&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.377;exitY=0.01;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.014;entryY=1.012;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="zAeGjUYxotYikVKDRhqf-3" target="lZ1_2r7MZ43qZYjNm-Xg-20" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="350" y="1730" as="sourcePoint" />
            <mxPoint x="440" y="1490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zAeGjUYxotYikVKDRhqf-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lZ1_2r7MZ43qZYjNm-Xg-20" target="lZ1_2r7MZ43qZYjNm-Xg-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zAeGjUYxotYikVKDRhqf-10" value="&lt;b&gt;Use&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;entryX=1;entryY=1;entryDx=0;entryDy=0;exitX=0.381;exitY=0.02;exitDx=0;exitDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="zAeGjUYxotYikVKDRhqf-3" target="zAeGjUYxotYikVKDRhqf-0" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="280" y="1900" as="sourcePoint" />
            <mxPoint x="570" y="1990" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&lt;b&gt;&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;font color=&quot;#cccc00&quot;&gt;UserStateCache&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#cccc00&quot;&gt;MySql Table :&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;font color=&quot;#cccc00&quot;&gt;StudentModule&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;- _client&lt;/span&gt;:&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;DjangoXBlockUserStateClient&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ user: User&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ course_id: CourseKey&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- _cache: dict&amp;nbsp; &amp;nbsp; // &amp;lt;block_key: user state of the block&amp;gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" tooltip="Source code: lms/djangoapps/courseware/model_data.py&#xa;&#xa;&#xa;    A cache of django model objects needed to supply the data&#xa;    for a module and its descendants&#xa;&#xa;&#xa;class FieldDataCache(object):&#xa;    def __init__(self, descriptors, course_id, user, asides=None, read_only=False):&#xa;        if asides is None:&#xa;            self.asides = []&#xa;        else:&#xa;            self.asides = asides&#xa;&#xa;        assert isinstance(course_id, CourseKey)&#xa;        self.course_id = course_id&#xa;        self.user = user&#xa;        self.read_only = read_only&#xa;&#xa;        self.cache = {&#xa;            Scope.user_state: UserStateCache(&#xa;                self.user,&#xa;                self.course_id,&#xa;            ),&#xa;            Scope.user_info: UserInfoCache(&#xa;                self.user,&#xa;            ),&#xa;            Scope.preferences: PreferencesCache(&#xa;                self.user,&#xa;            ),&#xa;            Scope.user_state_summary: UserStateSummaryCache(&#xa;                self.course_id,&#xa;            ),&#xa;        }&#xa;        self.scorable_locations = set()&#xa;        self.add_descriptors_to_cache(descriptors)&#xa;&#xa;    def add_descriptors_to_cache(self, descriptors):&#xa;        &quot;&quot;&quot;&#xa;        Add all `descriptors` to this FieldDataCache.&#xa;        &quot;&quot;&quot;&#xa;        if self.user.is_authenticated:&#xa;            self.scorable_locations.update(desc.location for desc in descriptors if desc.has_score)&#xa;            for scope, fields in self._fields_to_cache(descriptors).items():&#xa;                if scope not in self.cache:&#xa;                    continue&#xa;&#xa;                self.cache[scope].cache_fields(fields, descriptors, self.asides)&#xa;&#xa;......&#xa;&#xa;&#xa;&#xa;&#xa;" id="muPAOBemnUflqY9u-ahp-0">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="27" y="1755.75" width="295" height="123.25" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="muPAOBemnUflqY9u-ahp-1" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="zAeGjUYxotYikVKDRhqf-0" target="muPAOBemnUflqY9u-ahp-0" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="50" y="1740" as="sourcePoint" />
            <mxPoint x="210" y="1740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="zURHsBT0LYJ4qBAqaXF1" name="Course Blocks APIs">
    <mxGraphModel dx="2074" dy="1239" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="4681" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <UserObject label="&lt;font color=&quot;#000000&quot;&gt;def&lt;/font&gt;&amp;nbsp;&amp;nbsp;&lt;font style=&quot;font-size: 18px;&quot; color=&quot;#3333ff&quot;&gt;get_course_blocks&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;(...)&lt;/font&gt;" tooltip="Source: lms/djangoapps/course_blocks/api.py&#xa;&#xa;&#xa;def get_course_blocks(&#xa;        user,&#xa;        starting_block_usage_key,&#xa;        transformers=None,&#xa;        collected_block_structure=None,&#xa;        enable_user_permission_checking=True,&#xa;        exclude_unstarted_blocks=True&#xa;):&#xa;    &quot;&quot;&quot;&#xa;    A higher order function implemented on top of the&#xa;    block_structure.get_blocks function returning a transformed block&#xa;    structure for the given user starting at starting_block_usage_key.&#xa;&#xa;    Arguments:&#xa;        user (django.contrib.auth.models.User) - User object for&#xa;            which the block structure is to be transformed.&#xa;&#xa;        starting_block_usage_key (UsageKey) - Specifies the starting block&#xa;            of the block structure that is to be transformed.&#xa;&#xa;        transformers (BlockStructureTransformers) - A collection of&#xa;            transformers whose transform methods are to be called.&#xa;            If None, get_course_block_access_transformers() is used.&#xa;&#xa;        collected_block_structure (BlockStructureBlockData) - A&#xa;            block structure retrieved from a prior call to&#xa;            BlockStructureManager.get_collected.  Can be optionally&#xa;            provided if already available, for optimization.&#xa;&#xa;        enable_user_permission_checking (Boolean) - If `False` then we consider to hide&#xa;            some blocks for `Staff` users. Because they can access these&#xa;            blocks even they didn&#39;t select the cohort linked language ( Multilingual Course / Language Cohorts ).&#xa;            So, the value should be `False` for grading calculation function.&#xa;&#xa;    Returns:&#xa;        BlockStructureBlockData - A transformed block structure,&#xa;            starting at starting_block_usage_key, that has undergone the&#xa;            transform methods for the given user and the course&#xa;            associated with the block structure.  If using the default&#xa;            transformers, the transformed block structure will be&#xa;            exactly equivalent to the blocks that the given user has&#xa;            access.&#xa;    &quot;&quot;&quot;&#xa;    if not transformers:&#xa;        transformers = BlockStructureTransformers(&#xa;            get_course_block_access_transformers(enable_user_permission_checking, exclude_unstarted_blocks))&#xa;    transformers.usage_info = CourseUsageInfo(starting_block_usage_key.course_key, user)&#xa;&#xa;    return get_block_structure_manager(starting_block_usage_key.course_key).get_transformed(&#xa;        transformers,&#xa;        starting_block_usage_key,&#xa;        collected_block_structure,&#xa;    )&#xa;" id="RghaUDkGFwAiALjMJzUJ-1">
          <mxCell style="swimlane;childLayout=stackLayout;horizontal=1;fillColor=#dae8fc;horizontalStack=1;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;strokeColor=none;stackBorder=10;stackSpacing=-12;resizable=1;align=center;points=[];whiteSpace=wrap;html=1;" parent="1" vertex="1">
            <mxGeometry x="31" y="31" width="1040" height="140" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="1)&lt;b&gt; &lt;font color=&quot;#3333ff&quot;&gt;get_block_structure_manager&lt;/font&gt;&lt;/b&gt;(course_key) :&amp;nbsp;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;---&amp;gt; BlockStructureManager&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;2)&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;text-align: left; background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;BlockStructureManager&lt;/font&gt;&lt;/b&gt;.&lt;/span&gt;&lt;span style=&quot;text-align: left; background-color: initial;&quot;&gt;&lt;b&gt;get_transformed&lt;/b&gt;(transformers&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-align: left; background-color: initial;&quot;&gt;, starting_block_usage_key, collected_block_structure)&lt;/span&gt;&lt;/div&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/api.py&#xa;&#xa;def get_block_structure_manager(course_key):&#xa;    &quot;&quot;&quot;&#xa;    Returns the manager for managing Block Structures for the given course.&#xa;    &quot;&quot;&quot;&#xa;    store = modulestore()&#xa;    course_usage_key = store.make_course_usage_key(course_key)&#xa;    return BlockStructureManager(course_usage_key, store, get_cache())&#xa;&#xa;" id="RghaUDkGFwAiALjMJzUJ-2">
          <mxCell style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="RghaUDkGFwAiALjMJzUJ-1" vertex="1">
            <mxGeometry x="10" y="33" width="400" height="97" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="RghaUDkGFwAiALjMJzUJ-3" value="&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;In Def _transformed(...) ,&amp;nbsp;&lt;/span&gt;&lt;b style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;font color=&quot;#3333ff&quot;&gt;BlockStructureManager .&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;get_collected()&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;text-align: left;&quot;&gt;&lt;b&gt;1) --&amp;gt;&lt;/b&gt; call&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;_update_collected&lt;/b&gt;():&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;i&gt;BlockStructureModulestoreData&amp;nbsp;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;i&gt;[ inner call&amp;nbsp;&lt;/i&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b style=&quot;font-style: italic;&quot;&gt;BlockStructureTransformers&lt;/b&gt;&lt;i&gt;.&lt;b&gt;&lt;font color=&quot;#cc6600&quot;&gt;collect&lt;/font&gt;&lt;/b&gt;(block_structure)&amp;nbsp;&lt;/i&gt;&lt;/span&gt;&lt;i style=&quot;background-color: initial;&quot;&gt;]&lt;/i&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;i style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;2) --&amp;gt;&lt;/b&gt; call&amp;nbsp;&lt;/i&gt;&lt;i style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;BlockStructureTransformers&lt;/b&gt;.&lt;/i&gt;&lt;i style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#cc6600&quot;&gt;transform&lt;/font&gt;&lt;/b&gt;(block_structure)&lt;/i&gt;&lt;/div&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="RghaUDkGFwAiALjMJzUJ-1" vertex="1">
          <mxGeometry x="398" y="33" width="412" height="97" as="geometry" />
        </mxCell>
        <mxCell id="RghaUDkGFwAiALjMJzUJ-4" value="Return&amp;nbsp;&lt;b style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#80ff00&quot;&gt;BlockStructureBlockData&lt;/font&gt;&lt;/b&gt;" style="shape=step;perimeter=stepPerimeter;fixedSize=1;points=[];whiteSpace=wrap;html=1;" parent="RghaUDkGFwAiALjMJzUJ-1" vertex="1">
          <mxGeometry x="798" y="33" width="232" height="97" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&lt;b&gt;&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;BlockStructureManager&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ root_block_usage_key: UsageKey&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ store:&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;BlockStructureStore&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ modulestore:&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;MixedModuleStore&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ &lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;get_transformed&lt;/font&gt;&lt;/b&gt;(...):&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#66ff66&quot;&gt;BlockStructureBlockData&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;get_collected&lt;/b&gt;():&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;BlockStructureBlockData&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;-&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;_update_collected&lt;/b&gt;():&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#80ff00&quot;&gt;BlockStructureModulestoreData&lt;/font&gt;&lt;/b&gt; // ---&amp;gt; Inner&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;call&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;i&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BlockStructureFactory&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;.&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;create_from_modulestore&lt;/font&gt;&lt;/b&gt;(...)&lt;/span&gt;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/manager.py&#xa;&#xa;&#xa;Top-level module for the Block Structure framework with a class for managing&#xa;BlockStructures.&#xa;&#xa;&#xa;&#xa;class BlockStructureManager(object):&#xa;&#xa;    def get_transformed(self, transformers, starting_block_usage_key=None, collected_block_structure=None):&#xa;        block_structure = collected_block_structure.copy() if collected_block_structure else self.get_collected()&#xa;&#xa;        if starting_block_usage_key:&#xa;            if starting_block_usage_key not in block_structure:&#xa;                raise UsageKeyNotInBlockStructure(&#xa;                    &quot;The requested usage_key &#39;{0}&#39; is not found in the block_structure with root &#39;{1}&#39;&quot;,&#xa;                    unicode(starting_block_usage_key),&#xa;                    unicode(self.root_block_usage_key),&#xa;                )&#xa;            block_structure.set_root_block(starting_block_usage_key)&#xa;        transformers.transform(block_structure)&#xa;        return block_structure&#xa;&#xa;&#xa;&#xa;" id="RghaUDkGFwAiALjMJzUJ-5">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="23" y="220" width="537" height="160" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="RghaUDkGFwAiALjMJzUJ-6" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.49;exitY=1.053;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RghaUDkGFwAiALjMJzUJ-2" target="RghaUDkGFwAiALjMJzUJ-5" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="198" y="170" as="sourcePoint" />
            <mxPoint x="358" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&lt;b&gt;&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;BlockStructureStore&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- _cache: django.cache&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- _serialize(block_structure): str // compressed string&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;add(block_structure): None&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;_add_to_cache(serialized_data, bs_model): None&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;_update_or_create_model(block_structure, serialized_data): &lt;b&gt;StubModel&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;_get_model(root_block_usage_key): StubModel /&amp;nbsp;&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;BlockStructureModel&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;-&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;_update_or_create_model(block_structure, serialized_data):&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;StubModel /&amp;nbsp;&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;BlockStructureModel&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;-&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;_deserialize(serialized_data, root_block_usage_key):&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#00ff00&quot;&gt;BlockStructureBlockData&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/store.py&#xa;&#xa;&#xa;Storage for BlockStructure objects.&#xa;&#xa;&#xa;&#xa;class BlockStructureStore(object):&#xa;    def _serialize(self, block_structure):&#xa;        data_to_cache = (&#xa;            block_structure._block_relations,&#xa;            block_structure.transformer_data,&#xa;            block_structure._block_data_map,&#xa;        )&#xa;        return zpickle(data_to_cache)&#xa;&#xa;&#xa;    def _deserialize(self, serialized_data, root_block_usage_key):&#xa;        block_relations, transformer_data, block_data_map = zunpickle(serialized_data)&#xa;        return BlockStructureFactory.create_new(&#xa;            root_block_usage_key,&#xa;            block_relations,&#xa;            transformer_data,&#xa;            block_data_map,&#xa;        )&#xa;&#xa;    def add(self, block_structure):&#xa;        serialized_data = self._serialize(block_structure)&#xa;&#xa;        bs_model = self._update_or_create_model(block_structure, serialized_data)&#xa;        self._add_to_cache(serialized_data, bs_model)&#xa;&#xa;    def _add_to_cache(self, serialized_data, bs_model):&#xa;        cache_key = self._encode_root_cache_key(bs_model)&#xa;        self._cache.set(cache_key, serialized_data, timeout=config.cache_timeout_in_seconds())&#xa;&#xa;    def _update_or_create_model(self, block_structure, serialized_data):&#xa;        if _is_storage_backing_enabled():&#xa;            root_block = block_structure[block_structure.root_block_usage_key]&#xa;            bs_model, _ = BlockStructureModel.update_or_create(&#xa;                serialized_data,&#xa;                data_usage_key=block_structure.root_block_usage_key,&#xa;                **self._version_data_of_block(root_block)&#xa;            )&#xa;            return bs_model&#xa;        else:&#xa;            return StubModel(block_structure.root_block_usage_key)&#xa;&#xa;&#xa;    def _get_model(self, root_block_usage_key):&#xa;        if _is_storage_backing_enabled():&#xa;            return BlockStructureModel.get(root_block_usage_key)&#xa;        else:&#xa;            return StubModel(root_block_usage_key)&#xa;&#xa;    def _update_or_create_model(self, block_structure, serialized_data):&#xa;         if _is_storage_backing_enabled():&#xa;            root_block = block_structure[block_structure.root_block_usage_key]&#xa;            bs_model, _ = BlockStructureModel.update_or_create(&#xa;                serialized_data,&#xa;                data_usage_key=block_structure.root_block_usage_key,&#xa;                **self._version_data_of_block(root_block)&#xa;            )&#xa;            return bs_model&#xa;        else:&#xa;            return StubModel(block_structure.root_block_usage_key)&#xa;&#xa;&#xa;&#xa;&#xa;" id="RghaUDkGFwAiALjMJzUJ-7">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;dashPattern=1 2;" parent="1" vertex="1">
            <mxGeometry x="23" y="441" width="537" height="170" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="RghaUDkGFwAiALjMJzUJ-8" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RghaUDkGFwAiALjMJzUJ-5" target="RghaUDkGFwAiALjMJzUJ-7" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="243" y="400" as="sourcePoint" />
            <mxPoint x="403" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BlockStructureFactory&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;create_from_modulestore&lt;/font&gt;&lt;/b&gt;(root_block_usage_key, modulestore):&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;BlockStructureModulestoreData&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;{ &lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;NOTE:&lt;/font&gt;&lt;/b&gt;&amp;nbsp; Using method inside :&amp;nbsp; &lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot; color=&quot;#ff6666&quot;&gt;modulestore.get_item&lt;/font&gt;&lt;/b&gt;(root_block_usage_key) }&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;create_from_store(root_block_usage_key, block_structure_store):&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;BlockStructure&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;create_new(root_block_usage_key, block_relations, transformer_data, block_data_map):&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;BlockStructure&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/factory.py&#xa;&#xa;&#xa;Module for factory class for BlockStructure objects.&#xa;&#xa;&#xa;Factory class for BlockStructure objects.&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&quot;&quot;&quot;&#xa;Module for factory class for BlockStructure objects.&#xa;&quot;&quot;&quot;&#xa;from .block_structure import BlockStructureModulestoreData, BlockStructureBlockData&#xa;&#xa;&#xa;class BlockStructureFactory(object):&#xa;&#xa;    @classmethod&#xa;    def create_from_modulestore(cls, root_block_usage_key, modulestore):&#xa;        block_structure = BlockStructureModulestoreData(root_block_usage_key)&#xa;        blocks_visited = set()&#xa;&#xa;        def build_block_structure(xblock):&#xa;            if xblock.location in blocks_visited:&#xa;                return&#xa;            blocks_visited.add(xblock.location)&#xa;            block_structure._add_xblock(xblock.location, xblock)&#xa;&#xa;            for child in xblock.get_children():&#xa;                block_structure._add_relation(xblock.location, child.location)&#xa;                build_block_structure(child)&#xa;&#xa;        root_xblock = modulestore.get_item(root_block_usage_key, depth=None, lazy=False)&#xa;        build_block_structure(root_xblock)&#xa;        return block_structure&#xa;&#xa;    @classmethod&#xa;    def create_from_store(cls, root_block_usage_key, block_structure_store):&#xa;&#xa;        return block_structure_store.get(root_block_usage_key)&#xa;&#xa;    @classmethod&#xa;    def create_new(cls, root_block_usage_key, block_relations, transformer_data, block_data_map):&#xa;&#xa;        block_structure = BlockStructureBlockData(root_block_usage_key)&#xa;        block_structure._block_relations = block_relations  # pylint: disable=protected-access&#xa;        block_structure.transformer_data = transformer_data&#xa;        block_structure._block_data_map = block_data_map  &#xa;        return block_structure&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-36">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;rounded=1;strokeColor=#A680B8;strokeWidth=10;" parent="1" vertex="1">
            <mxGeometry x="640" y="460.5" width="590" height="169" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;BlockStructureTransformers&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ usage_info: object&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;_transformers: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp; {&#39;supports_filter&#39;: [], &#39;no_filter&#39;: []}&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ __iadd__(transformers): self&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp;Adds transformers to the collection&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;font color=&quot;#cc6600&quot;&gt;&lt;b&gt;collect&lt;/b&gt;&lt;/font&gt;(block_structure): None&amp;nbsp; &amp;nbsp; &amp;nbsp; //&amp;nbsp;&amp;nbsp;Collects data for each registered transformer&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#cc6600&quot;&gt;transform&lt;/font&gt;&lt;/b&gt;(block_structure): None&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;_transform_with_filters(block_structure): None&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;_transform_without_filters(block_structure): None&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/transformers.py&#xa;&#xa;&#xa;    The BlockStructureTransformers class encapsulates an ordered list of block&#xa;    structure transformers.  It uses the Transformer Registry to verify the&#xa;    the registration status of added transformers and to collect their data.&#xa;    It provides aggregate functionality for collection and ordered&#xa;    transformation of the transformers.&#xa;&#xa;&#xa;class BlockStructureTransformers(object):&#xa;    def __init__(self, transformers=None, usage_info=None):&#xa;        self.usage_info = usage_info&#xa;        self._transformers = {&#39;supports_filter&#39;: [], &#39;no_filter&#39;: []}&#xa;        if transformers:&#xa;            self.__iadd__(transformers)&#xa;&#xa;    def __iadd__(self, transformers):&#xa;        unregistered_transformers = TransformerRegistry.find_unregistered(transformers)&#xa;        if unregistered_transformers:&#xa;            raise TransformerException(&#xa;                &quot;The following requested transformers are not registered: {}&quot;.format(unregistered_transformers)&#xa;            )&#xa;&#xa;        for transformer in transformers:&#xa;            if isinstance(transformer, FilteringTransformerMixin):&#xa;                self._transformers[&#39;supports_filter&#39;].append(transformer)&#xa;            else:&#xa;                self._transformers[&#39;no_filter&#39;].append(transformer)&#xa;        return self&#xa;&#xa;    @classmethod&#xa;    def collect(cls, block_structure):&#xa;        for transformer in TransformerRegistry.get_registered_transformers():&#xa;            block_structure._add_transformer(transformer)  &#xa;            transformer.collect(block_structure)&#xa;       block_structure._collect_requested_xblock_fields()  &#xa;&#xa;&#xa;    def transform(self, block_structure):&#xa;        self._transform_with_filters(block_structure)&#xa;        self._transform_without_filters(block_structure)&#xa;        block_structure._prune_unreachable()  &#xa;&#xa;&#xa;&#xa;&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-37">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="641" y="220" width="589" height="160" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;b&gt;TransformerRegistry&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ NAMESPACE: str&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// &#39;openedx.block_structure_transformer&#39;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;USE_PLUGIN_MANAGER: bool&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// True&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ get_registered_transformers(): set&amp;nbsp; &amp;nbsp; //&amp;nbsp;{BlockStructureTransformer}&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;find_unregistered(transformers): set // set of transformer name string&amp;nbsp;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/transformer_registry.py&#xa;" id="ZLwdJihxKhlf1zQtMXW1-38">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="1290" y="219" width="458" height="125" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;PluginManager&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ get_available_plugins(namespace): dict&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;get_plugin(name, namespace): object&amp;nbsp; &amp;nbsp; &amp;nbsp; // Return Plugin&lt;/p&gt;" tooltip="Source : openedx/core/lib/plugins.py&#xa;&#xa;&#xa;    Base class that manages plugins for the edX platform.&#xa;&#xa;&#xa;class PluginManager(object):&#xa;&#xa;    @classmethod&#xa;    @memoized&#xa;    def get_available_plugins(cls, namespace=None):&#xa;        plugins = OrderedDict()&#xa;        extension_manager = ExtensionManager(namespace=namespace or cls.NAMESPACE) &#xa;        for plugin_name in extension_manager.names():&#xa;            plugins[plugin_name] = extension_manager[plugin_name].plugin&#xa;        return plugins&#xa;&#xa;    @classmethod&#xa;    def get_plugin(cls, name, namespace=None):&#xa;&#xa;        plugins = cls.get_available_plugins(namespace)&#xa;        if name not in plugins:&#xa;            raise PluginError(&quot;No such plugin {name} for entry point {namespace}&quot;.format(&#xa;                name=name,&#xa;                namespace=namespace or cls.NAMESPACE,  &#xa;            ))&#xa;        return plugins[name]&#xa;&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-39">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="1815" y="215" width="324" height="70" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-43" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="RghaUDkGFwAiALjMJzUJ-5" target="ZLwdJihxKhlf1zQtMXW1-37" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="440" y="410" as="sourcePoint" />
            <mxPoint x="600" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff8000&quot;&gt;BlockStructureTransformer&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ WRITE_VERSION: int&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // 0&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;READ_VERSION: int&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // 0&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ name(): str&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;+&amp;nbsp;collect(block_structure): None&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp;&amp;nbsp;Collects data for each registered transformer&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;+&amp;nbsp;transform(block_structure): None&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/transformer.py&#xa;&#xa;&#xa;&#xa;Abstract base class for all block structure transformers.&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-44">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;dashPattern=8 8;strokeWidth=2;" parent="1" vertex="1">
            <mxGeometry x="1290" y="489.5" width="460" height="140" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#ff8000&quot;&gt;FilteringTransformerMixin&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ transform(usage_info, block_structure): self&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;transform_block_filters(usage_info, block_structure): list&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/transformers.py&#xa;&#xa;&#xa;    Transformers may optionally choose to implement this mixin if their&#xa;    transform logic can be broken apart into a lambda for optimization of&#xa;    combined tree traversals.&#xa;&#xa;&#xa;&#xa;class FilteringTransformerMixin(BlockStructureTransformer):&#xa;    def transform(self, usage_info, block_structure):&#xa;block_structure.filter_topological_traversal(self.transform_block_filters(usage_info, block_structure))&#xa;&#xa;    @abstractmethod&#xa;    def transform_block_filters(self, usage_info, block_structure):&#xa;        raise NotImplementedError&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;" id="Q1EbfZvZzoFKNJW5KDZh-1">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="1290" y="379.5" width="460" height="70" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;StubModel&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ data_usage_key: UsageKey&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ delete(): None&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/store.py&#xa;&#xa;&#xa;class StubModel(object):&#xa;    &quot;&quot;&quot;&#xa;    Stub model to use when storage backing is disabled.&#xa;    By using this stub, we eliminate the need for extra&#xa;    conditional statements in the code.&#xa;    &quot;&quot;&quot;&#xa;    def __init__(self, root_block_usage_key):&#xa;        self.data_usage_key = root_block_usage_key&#xa;&#xa;    def __unicode__(self):&#xa;        return unicode(self.data_usage_key)&#xa;&#xa;    def delete(self):&#xa;        &quot;&quot;&quot;&#xa;        Noop delete method.&#xa;        &quot;&quot;&quot;&#xa;        pass&#xa;&#xa;&#xa;" id="Q1EbfZvZzoFKNJW5KDZh-5">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;dashPattern=1 2;" parent="1" vertex="1">
            <mxGeometry x="23" y="663.5" width="173" height="79" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-6" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RghaUDkGFwAiALjMJzUJ-7" target="Q1EbfZvZzoFKNJW5KDZh-5" edge="1">
          <mxGeometry x="-0.3967" y="-1" width="160" relative="1" as="geometry">
            <mxPoint x="93" y="620" as="sourcePoint" />
            <mxPoint x="253" y="620" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-9" value="" style="group;dashed=1;dashPattern=1 2;strokeColor=#FF6666;" parent="1" vertex="1" connectable="0">
          <mxGeometry x="23" y="766" width="230" height="180" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class db.models.&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;BlockStructureModel&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ data_usage_key: UsageKeyStr&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ data:&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;CustomizableFileField&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ get_serialized_data(): collected data&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/store.py&#xa;&#xa;&#xa;class StubModel(object):&#xa;    &quot;&quot;&quot;&#xa;    Stub model to use when storage backing is disabled.&#xa;    By using this stub, we eliminate the need for extra&#xa;    conditional statements in the code.&#xa;    &quot;&quot;&quot;&#xa;    def __init__(self, root_block_usage_key):&#xa;        self.data_usage_key = root_block_usage_key&#xa;&#xa;    def __unicode__(self):&#xa;        return unicode(self.data_usage_key)&#xa;&#xa;    def delete(self):&#xa;        &quot;&quot;&quot;&#xa;        Noop delete method.&#xa;        &quot;&quot;&quot;&#xa;        pass&#xa;&#xa;&#xa;" id="Q1EbfZvZzoFKNJW5KDZh-7">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;dashPattern=1 2;" parent="Q1EbfZvZzoFKNJW5KDZh-9" vertex="1">
            <mxGeometry width="230" height="180" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-8" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;MySql&lt;/font&gt;&lt;/b&gt;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;strokeWidth=3;strokeColor=#FF3333;dashed=1;dashPattern=1 2;" parent="Q1EbfZvZzoFKNJW5KDZh-9" vertex="1">
          <mxGeometry x="130" y="89" width="77" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-10" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use MySql&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;strokeColor=#FF6666;" parent="1" source="RghaUDkGFwAiALjMJzUJ-7" target="Q1EbfZvZzoFKNJW5KDZh-7" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="243" y="683.5" as="sourcePoint" />
            <mxPoint x="403" y="683.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-12" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RghaUDkGFwAiALjMJzUJ-5" target="ZLwdJihxKhlf1zQtMXW1-36" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="453" y="420" as="sourcePoint" />
            <mxPoint x="613" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-16" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-44" target="Q1EbfZvZzoFKNJW5KDZh-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1210" y="832" as="sourcePoint" />
            <mxPoint x="1370" y="832" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-17" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-16" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-18" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-16" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-19" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-37" target="ZLwdJihxKhlf1zQtMXW1-38" edge="1">
          <mxGeometry x="0.0064" width="160" relative="1" as="geometry">
            <mxPoint x="1118" y="420" as="sourcePoint" />
            <mxPoint x="1550" y="300" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-20" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-38" target="ZLwdJihxKhlf1zQtMXW1-44" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1568" y="426.5" as="sourcePoint" />
            <mxPoint x="1728" y="426.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-21" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-38" target="Q1EbfZvZzoFKNJW5KDZh-1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1768" y="426.5" as="sourcePoint" />
            <mxPoint x="1928" y="426.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;b&gt;UserPartitionTransformer&lt;/b&gt;&amp;nbsp;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" tooltip="Source : lms/djangoapps/course_blocks/transformers/user_partitions.py&#xa;&#xa;&#xa;    A transformer that enforces the group access rules on course blocks,&#xa;    by honoring their user_partitions and group_access fields, and&#xa;    removing all blocks in the block structure to which the user does&#xa;&#xa;&#xa;&#xa;&#xa;class UserPartitionTransformer(FilteringTransformerMixin, BlockStructureTransformer):&#xa;    WRITE_VERSION = 1&#xa;    READ_VERSION = 1&#xa;&#xa;    def __init__(self, enable_user_permission_checking=True):&#xa;        super(UserPartitionTransformer, self).__init__()&#xa;        self._enable_user_permission_checking = enable_user_permission_checking&#xa;&#xa;    @classmethod&#xa;    def name(cls):&#xa;        &quot;&quot;&quot;&#xa;        Unique identifier for the transformer&#39;s class;&#xa;        same identifier used in setup.py.&#xa;        &quot;&quot;&quot;&#xa;        return &quot;user_partitions&quot;&#xa;&#xa;    @classmethod&#xa;    def collect(cls, block_structure):&#xa;        SplitTestTransformer.collect(block_structure)&#xa;&#xa;        root_block = block_structure.get_xblock(block_structure.root_block_usage_key)&#xa;        user_partitions = get_all_partitions_for_course(root_block, active_only=True)&#xa;        block_structure.set_transformer_data(cls, &#39;user_partitions&#39;, user_partitions)&#xa;&#xa;        if not user_partitions:&#xa;            return&#xa;&#xa;        for block_key in block_structure.topological_traversal():&#xa;            xblock = block_structure.get_xblock(block_key)&#xa;            parent_keys = block_structure.get_parents(block_key)&#xa;            merged_parent_access_list = [&#xa;                block_structure.get_transformer_block_field(parent_key, cls, &#39;merged_group_access&#39;)&#xa;                for parent_key in parent_keys&#xa;            ]&#xa;            merged_group_access = _MergedGroupAccess(user_partitions, xblock, merged_parent_access_list)&#xa;            block_structure.set_transformer_block_field(block_key, cls, &#39;merged_group_access&#39;, merged_group_access)&#xa;&#xa;    def transform_block_filters(self, usage_info, block_structure):&#xa;        user = usage_info.user&#xa;        result_list = SplitTestTransformer().transform_block_filters(usage_info, block_structure)&#xa;&#xa;        user_partitions = block_structure.get_transformer_data(self, &#39;user_partitions&#39;)&#xa;        if not user_partitions:&#xa;            return [block_structure.create_universal_filter()]&#xa;&#xa;        user_groups = _get_user_partition_groups(usage_info.course_key, user_partitions, user)&#xa;&#xa;        group_access_filter = block_structure.create_removal_filter(&#xa;            lambda block_key: not (&#xa;                (self._enable_user_permission_checking and has_access(user, &#39;staff&#39;, block_key)) or&#xa;                block_structure.get_transformer_block_field(block_key, self, &#39;merged_group_access&#39;).check_group_access(&#xa;                    user_groups&#xa;                )&#xa;            )&#xa;        )&#xa;&#xa;        result_list.append(group_access_filter)&#xa;        return result_list&#xa;&#xa;&#xa;&#xa;" id="Q1EbfZvZzoFKNJW5KDZh-22">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="1904" y="404.5" width="220" height="50" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-23" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-44" target="Q1EbfZvZzoFKNJW5KDZh-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1889" y="774.5" as="sourcePoint" />
            <mxPoint x="2049" y="774.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-24" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-23" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-25" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-23" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-26" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Q1EbfZvZzoFKNJW5KDZh-1" target="Q1EbfZvZzoFKNJW5KDZh-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1809" y="580" as="sourcePoint" />
            <mxPoint x="1969" y="580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-27" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-26" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-28" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-26" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;b&gt;VisibilityTransformer&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" tooltip="Source : lms/djangoapps/course_blocks/transformers/visibility.py&#xa;&#xa;&#xa;&#xa;    A transformer that enforces the visible_to_staff_only field on&#xa;    blocks by removing blocks from the block structure for which the&#xa;    user does not have access. The visible_to_staff_only field on a&#xa;    block is percolated down to its descendants, so that all blocks&#xa;    enforce the visibility settings from their ancestors.&#xa;&#xa;&#xa;&#xa;&#xa;" id="Q1EbfZvZzoFKNJW5KDZh-29">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="1904" y="314.5" width="220" height="50" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-30" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-44" target="Q1EbfZvZzoFKNJW5KDZh-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1750" y="524.5" as="sourcePoint" />
            <mxPoint x="2049" y="774.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-31" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-30" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-32" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-30" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-33" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Q1EbfZvZzoFKNJW5KDZh-1" target="Q1EbfZvZzoFKNJW5KDZh-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1829" y="314.5" as="sourcePoint" />
            <mxPoint x="1989" y="314.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-34" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-33" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-35" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-33" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;BlocksAPITransformer&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" tooltip="Source : lms/djangoapps/course_api/blocks/transformers/blocks_api.py&#xa;&#xa;&#xa;&#xa;    Umbrella transformer that contains all the transformers needed by the&#xa;    Course Blocks API.&#xa;&#xa;    Contained Transformers (processed in this order):&#xa;        StudentViewTransformer&#xa;        BlockCountsTransformer&#xa;        BlockDepthTransformer&#xa;        BlockNavigationTransformer&#xa;&#xa;&#xa;&#xa;&#xa;" id="Q1EbfZvZzoFKNJW5KDZh-36">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="1904" y="542" width="220" height="50" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;BlockCompletionTransformer&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" tooltip="Source : lms/djangoapps/course_api/blocks/transformers/block_completion.py&#xa;&#xa;&#xa;&#xa;Keep track of the completion of each block within the block structure.&#xa;&#xa;&#xa;&#xa;&#xa;" id="Q1EbfZvZzoFKNJW5KDZh-37">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="1904" y="615.5" width="220" height="50" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-38" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-44" target="Q1EbfZvZzoFKNJW5KDZh-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1769" y="718" as="sourcePoint" />
            <mxPoint x="1929" y="718" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-39" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-38" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-40" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-38" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-41" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-44" target="Q1EbfZvZzoFKNJW5KDZh-36" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1759" y="714.5" as="sourcePoint" />
            <mxPoint x="1919" y="714.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-42" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-41" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-43" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="Q1EbfZvZzoFKNJW5KDZh-41" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Q1EbfZvZzoFKNJW5KDZh-44" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.495;exitY=1.01;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="1" source="RghaUDkGFwAiALjMJzUJ-2" target="ZLwdJihxKhlf1zQtMXW1-37" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="481" y="195" as="sourcePoint" />
            <mxPoint x="641" y="195" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="AzmmhtIUfq_Ny_H0_IzZ-2" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="RghaUDkGFwAiALjMJzUJ-7" target="ZLwdJihxKhlf1zQtMXW1-36" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="480" y="690" as="sourcePoint" />
            <mxPoint x="640" y="690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="AzmmhtIUfq_Ny_H0_IzZ-4" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-39" target="ZLwdJihxKhlf1zQtMXW1-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1813" y="219.5" as="sourcePoint" />
            <mxPoint x="1763" y="219.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="AzmmhtIUfq_Ny_H0_IzZ-5" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="AzmmhtIUfq_Ny_H0_IzZ-4" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AzmmhtIUfq_Ny_H0_IzZ-6" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="AzmmhtIUfq_Ny_H0_IzZ-4" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;i&gt;[XBlock]&lt;/i&gt;&lt;b&gt;&amp;nbsp; // class&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#3333ff&quot;&gt;XBlock&lt;/font&gt;&amp;nbsp;&lt;/b&gt;( ..., HandlersMixin,...)&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+_services&lt;/span&gt;: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Supported: fs / ...&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+runtime: function&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// Subclass of DescriptorSystem&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ json_handler(func): Type&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;handler(func): Type&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;b&gt;&lt;font color=&quot;#33ff33&quot;&gt;handle&lt;/font&gt;&lt;/b&gt;(handler_name, request,...): Type&amp;nbsp; // Call runtime.handle&lt;/p&gt;" tooltip="Source code: xblock/core.py&#xa;&#xa;&#xa;class XBlock(XmlSerializationMixin, HierarchyMixin, ScopedStorageMixin, RuntimeServicesMixin, HandlersMixin,&#xa;             IndexInfoMixin, ViewsMixin, SharedBlockBase):&#xa;    ......&#xa;    def render(self, view, context=None):&#xa;        &quot;&quot;&quot;Render `view` with this block&#39;s runtime and the supplied `context`&quot;&quot;&quot;&#xa;        return self.runtime.render(self, view, context)&#xa;&#xa;&#xa;&#xa;" id="5-NNVl_hAvNS7Msvbjms-1">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;strokeWidth=5;strokeColor=#67AB9F;" parent="1" vertex="1">
            <mxGeometry x="1424.5" y="807.5" width="361" height="133" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="5-NNVl_hAvNS7Msvbjms-2" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-24" target="5-NNVl_hAvNS7Msvbjms-1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1499.5" y="929" as="sourcePoint" />
            <mxPoint x="1659.5" y="929" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5-NNVl_hAvNS7Msvbjms-4" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-36" target="ZLwdJihxKhlf1zQtMXW1-24" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="1120" y="680" as="sourcePoint" />
            <mxPoint x="1280" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5-NNVl_hAvNS7Msvbjms-5" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="ZLwdJihxKhlf1zQtMXW1-36" target="ZLwdJihxKhlf1zQtMXW1-1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="810" y="660" as="sourcePoint" />
            <mxPoint x="970" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="" tooltip="Source : openedx/core/djangoapps/content/block_structure/block_structure.py&#xa;" id="5-NNVl_hAvNS7Msvbjms-6">
          <mxCell style="group;strokeColor=default;dashed=1;dashPattern=1 4;" parent="1" vertex="1" connectable="0">
            <mxGeometry x="360" y="738" width="1000" height="680" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&lt;b&gt;&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#66ff66&quot;&gt;BlockStructureBlockData&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- _block_data_map: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp;{UsageKey: &lt;b&gt;&lt;i&gt;&lt;u&gt;BlockData&lt;/u&gt;&lt;/i&gt;&lt;/b&gt;}&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ transformer_data: &lt;b&gt;&lt;i&gt;&lt;font color=&quot;#cccc00&quot; style=&quot;font-size: 13px;&quot;&gt;TransformerDataMap&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ __getitem__(usage_key): BlockData&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ copy():&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;BlockStructureBlockData&lt;/b&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // call &lt;b&gt;BlockStructureFactory&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;get_xblock_field(usage_key, field_name, default): object // XBlock field value&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;get_transformer_data(transformer, key, default): object&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;set_transformer_data(transformer, key, value): None&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;get_transformer_block_data(usage_key, transformer):&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;TransformerData&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;get_transformer_block_field(usage_key, transformer, key, default): object&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;create_removal_filter(...): function&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;_get_or_create_block(usage_key): BlockData&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/block_structure.py&#xa;&#xa;&#xa;    Subclass of BlockStructure that is responsible for managing block&#xa;    and transformer data.&#xa;&#xa;&#xa;class BlockStructureBlockData(BlockStructure):&#xa;&#xa;    def __getitem__(self, usage_key):&#xa;        return self._block_data_map[usage_key]&#xa;&#xa;    def get_xblock_field(self, usage_key, field_name, default=None):&#xa;        block_data = self._block_data_map.get(usage_key)&#xa;        return getattr(block_data, field_name, default) if block_data else default&#xa;&#xa;&#xa;    def get_transformer_data(self, transformer, key, default=None):&#xa;        try:&#xa;            return getattr(self.transformer_data[transformer], key, default)&#xa;        except KeyError:&#xa;            return default&#xa;&#xa;    def get_transformer_block_data(self, usage_key, transformer):&#xa;        return self._block_data_map[usage_key].transformer_data[transformer]&#xa;&#xa;    def get_transformer_block_field(self, usage_key, transformer, key, default=None):&#xa;        try:&#xa;            transformer_data = self.get_transformer_block_data(usage_key, transformer)&#xa;        except KeyError:&#xa;            return default&#xa;        return getattr(transformer_data, key, default)&#xa;&#xa;    def _get_or_create_block(self, usage_key):&#xa;        try:&#xa;            return self._block_data_map[usage_key]&#xa;        except KeyError:&#xa;            block_data = BlockData(usage_key)&#xa;            self._block_data_map[usage_key] = block_data&#xa;            return block_data&#xa;&#xa;&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-1">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;strokeWidth=2;" parent="5-NNVl_hAvNS7Msvbjms-6" vertex="1">
            <mxGeometry x="48" y="56" width="430" height="210" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#66ff66&quot;&gt;BlockStructure&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ root_block_usage_key: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;UsageKey&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;-&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;_block_relations: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; //&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;{UsageKey: &lt;u&gt;&lt;b&gt;&lt;i&gt;_BlockRelations&lt;/i&gt;&lt;/b&gt;&lt;/u&gt;}&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;# _add_block(block_relations, usage_key): None&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- _add_relation(parent_key, child_key): None&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;_add_to_relations(block_relations, parent_key, child_key): None&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;set_root_block(usage_key): None&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;get_parents(usage_key): list[UsageKey]&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;get_children(usage_key): list[UsageKey]&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;topological_traversal(&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;filter_func...):&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;generator&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;post_order_traversal(filter_func...): generate&lt;/span&gt;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/block_structure.py&#xa;&#xa;&#xa;    Base class for a block structure.  BlockStructures are constructed&#xa;    using the BlockStructureFactory and then used as the currency across&#xa;    Transformers.&#xa;&#xa;    This base class keeps track of the block structure&#39;s root_block_usage_key,&#xa;    the existence of the blocks, and their parents and children&#xa;    relationships (graph nodes and edges).&#xa;&#xa;&#xa;&#xa;&#xa;class BlockStructure(object):&#xa;&#xa;    @staticmethod&#xa;    def _add_block(block_relations, usage_key):&#xa;        &quot;&quot;&quot;&#xa;        Adds the given usage_key to the given block_relations map.&#xa;&#xa;        Arguments:&#xa;            block_relations (dict({UsageKey: _BlockRelations})) -&#xa;                Internal map of a block&#39;s usage key to its&#xa;                parents/children relations.&#xa;&#xa;            usage_key (UsageKey) - Usage key of the block that is to&#xa;                be added to the given block_relations.&#xa;        &quot;&quot;&quot;&#xa;        if usage_key not in block_relations:&#xa;            block_relations[usage_key] = _BlockRelations()&#xa;&#xa;    def _add_relation(self, parent_key, child_key):&#xa;&#xa;        self._add_to_relations(self._block_relations, parent_key, child_key)&#xa;&#xa;    @staticmethod&#xa;    def _add_to_relations(block_relations, parent_key, child_key):&#xa;        BlockStructure._add_block(block_relations, parent_key)&#xa;        BlockStructure._add_block(block_relations, child_key)&#xa;&#xa;        block_relations[child_key].parents.append(parent_key)&#xa;        block_relations[parent_key].children.append(child_key)&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-2">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;strokeWidth=2;" parent="5-NNVl_hAvNS7Msvbjms-6" vertex="1">
            <mxGeometry x="48" y="296" width="430" height="190" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-3" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="5-NNVl_hAvNS7Msvbjms-6" source="ZLwdJihxKhlf1zQtMXW1-2" target="ZLwdJihxKhlf1zQtMXW1-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="198" y="186" as="sourcePoint" />
            <mxPoint x="358" y="186" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-4" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="ZLwdJihxKhlf1zQtMXW1-3" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-5" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="ZLwdJihxKhlf1zQtMXW1-3" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;i&gt;&lt;b&gt;&lt;u&gt;_BlockRelations&lt;/u&gt;&lt;/b&gt;&lt;/i&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ parents: list&amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp;list [UsageKey]&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;children: list&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;//&amp;nbsp;list [UsageKey]&lt;/span&gt;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/block_structure.py&#xa;&#xa;&#xa;class _BlockRelations(object):&#xa;    &quot;&quot;&quot;&#xa;    Data structure to encapsulate relationships for a single block,&#xa;    including its children and parents.&#xa;    &quot;&quot;&quot;&#xa;    def __init__(self):&#xa;&#xa;        # List of usage keys of this block&#39;s parents.&#xa;        # list [UsageKey]&#xa;        self.parents = []&#xa;&#xa;        # List of usage keys of this block&#39;s children.&#xa;        # list [UsageKey]&#xa;        self.children = []&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-6">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;strokeWidth=2;" parent="5-NNVl_hAvNS7Msvbjms-6" vertex="1">
            <mxGeometry x="48" y="533" width="190" height="78" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-10" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="5-NNVl_hAvNS7Msvbjms-6" source="ZLwdJihxKhlf1zQtMXW1-2" target="ZLwdJihxKhlf1zQtMXW1-6" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="288" y="403" as="sourcePoint" />
            <mxPoint x="448" y="403" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;i&gt;TransformerData&amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/block_structure.py&#xa;&#xa;Data structure to encapsulate collected data for a transformer.&#xa;&#xa;&#xa;&#xa;&#xa;class TransformerData(FieldData):&#xa;    pass&#xa;&#xa;&#xa;&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-12">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;strokeWidth=2;" parent="5-NNVl_hAvNS7Msvbjms-6" vertex="1">
            <mxGeometry x="318" y="533" width="161" height="48" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;i&gt;&lt;u&gt;BlockData&lt;/u&gt;&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ location: UsageKey&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ transformer_data: &lt;b&gt;&lt;i&gt;&lt;font color=&quot;#cccc00&quot; style=&quot;font-size: 14px;&quot;&gt;TransformerDataMap&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr style=&quot;border-style: solid;&quot; size=&quot;1&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;class_field_names: [&#39;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;fields&#39;] +&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;[&#39;location&#39;, &#39;transformer_data&#39;]&lt;/span&gt;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/block_structure.py&#xa;&#xa;Data structure to encapsulate collected data for a single block.&#xa;&#xa;&#xa;&#xa;class BlockData(FieldData):&#xa;&#xa;    def class_field_names(self):&#xa;        return super(BlockData, self).class_field_names() + [&#39;location&#39;, &#39;transformer_data&#39;]&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-13">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;strokeWidth=2;" parent="5-NNVl_hAvNS7Msvbjms-6" vertex="1">
            <mxGeometry x="555" y="369" width="380" height="101" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-17" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="5-NNVl_hAvNS7Msvbjms-6" source="ZLwdJihxKhlf1zQtMXW1-11" target="ZLwdJihxKhlf1zQtMXW1-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="380" y="522" as="sourcePoint" />
            <mxPoint x="540" y="522" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-18" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="ZLwdJihxKhlf1zQtMXW1-17" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-19" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="ZLwdJihxKhlf1zQtMXW1-17" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-20" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="5-NNVl_hAvNS7Msvbjms-6" source="ZLwdJihxKhlf1zQtMXW1-11" target="ZLwdJihxKhlf1zQtMXW1-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="448" y="603" as="sourcePoint" />
            <mxPoint x="608" y="603" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-21" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="ZLwdJihxKhlf1zQtMXW1-20" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-22" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="ZLwdJihxKhlf1zQtMXW1-20" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#cccc00&quot; style=&quot;font-size: 13px;&quot;&gt;TransformerDataMap&lt;/font&gt; &lt;/b&gt;(dict)&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;get_or_create(key):&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;i&gt;TransformerData&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;-&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;_translate_key(key): str&lt;/span&gt;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/block_structure.py&#xa;&#xa;    A map of Transformer name to its corresponding TransformerData.&#xa;    The map can be accessed by the Transformer&#39;s name or the&#xa;    Transformer&#39;s class type.&#xa;&#xa;&#xa;class TransformerDataMap(dict):&#xa;&#xa;    def _translate_key(self, key):&#xa;        try:&#xa;            return key.name()&#xa;        except AttributeError:&#xa;            return key&#xa;&#xa;    def get_or_create(self, key):&#xa;        try:&#xa;            return self[key]&#xa;        except KeyError:&#xa;            new_transformer_data = TransformerData()&#xa;            self[key] = new_transformer_data&#xa;            return new_transformer_data&#xa;&#xa;    def __getitem__(self, key):&#xa;        key = self._translate_key(key)&#xa;        return dict.__getitem__(self, key)&#xa;&#xa;    def __setitem__(self, key, value):&#xa;        key = self._translate_key(key)&#xa;        dict.__setitem__(self, key, value)&#xa;&#xa;    def __delitem__(self, key):&#xa;        key = self._translate_key(key)&#xa;        dict.__delitem__(self, key)&#xa;&#xa;&#xa;&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-23">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;strokeWidth=2;" parent="5-NNVl_hAvNS7Msvbjms-6" vertex="1">
            <mxGeometry x="552" y="253" width="386" height="79" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#80ff00&quot;&gt;BlockStructureModulestoreData&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;- _xblock_map: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;//&amp;nbsp;{UsageKey: &lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;XBlock&lt;/font&gt;&lt;/b&gt;}&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;_requested_xblock_fields: set&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; //&amp;nbsp;Set of xBlock field names&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ request_xblock_fields(*field_names)(): None&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+&amp;nbsp;get_xblock(usage_key): XBlock&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;_add_xblock(usage_key, xblock): None&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;-&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;_collect_requested_xblock_fields(): None&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;-&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;_set_xblock_field(block_data, xblock, field_name): None&lt;/span&gt;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/block_structure.py&#xa;&#xa;&#xa;    Subclass of BlockStructureBlockData that is responsible for managing&#xa;    xBlocks and corresponding functionality that should only be called&#xa;    during the Collect phase.&#xa;&#xa;&#xa;class BlockStructureModulestoreData(BlockStructureBlockData):&#xa;&#xa;    def _add_xblock(self, usage_key, xblock):&#xa;        self._xblock_map[usage_key] = xblock&#xa;&#xa;    def _collect_requested_xblock_fields(self):&#xa;        for xblock_usage_key, xblock in self._xblock_map.iteritems():&#xa;            block_data = self._get_or_create_block(xblock_usage_key)&#xa;            for field_name in self._requested_xblock_fields:&#xa;                self._set_xblock_field(block_data, xblock, field_name)&#xa;&#xa;    def _set_xblock_field(self, block_data, xblock, field_name):&#xa;        if hasattr(xblock, field_name):&#xa;            setattr(block_data, field_name, getattr(xblock, field_name))&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-24">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;strokeWidth=2;" parent="5-NNVl_hAvNS7Msvbjms-6" vertex="1">
            <mxGeometry x="552" y="56" width="386" height="160" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-25" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="5-NNVl_hAvNS7Msvbjms-6" source="ZLwdJihxKhlf1zQtMXW1-1" target="ZLwdJihxKhlf1zQtMXW1-24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="672" y="476" as="sourcePoint" />
            <mxPoint x="832" y="476" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-26" value="parent" style="edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;" parent="ZLwdJihxKhlf1zQtMXW1-25" connectable="0" vertex="1">
          <mxGeometry x="-1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-27" value="child" style="edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;" parent="ZLwdJihxKhlf1zQtMXW1-25" connectable="0" vertex="1">
          <mxGeometry x="1" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-34" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;" parent="5-NNVl_hAvNS7Msvbjms-6" source="ZLwdJihxKhlf1zQtMXW1-1" target="ZLwdJihxKhlf1zQtMXW1-23" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="512" y="226" as="sourcePoint" />
            <mxPoint x="672" y="226" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZLwdJihxKhlf1zQtMXW1-35" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="5-NNVl_hAvNS7Msvbjms-6" source="ZLwdJihxKhlf1zQtMXW1-13" target="ZLwdJihxKhlf1zQtMXW1-23" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="642" y="339" as="sourcePoint" />
            <mxPoint x="802" y="339" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="AzmmhtIUfq_Ny_H0_IzZ-3" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;entryX=1;entryY=0;entryDx=0;entryDy=0;exitX=0.008;exitY=0.899;exitDx=0;exitDy=0;exitPerimeter=0;" parent="5-NNVl_hAvNS7Msvbjms-6" source="ZLwdJihxKhlf1zQtMXW1-23" target="ZLwdJihxKhlf1zQtMXW1-12" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="378" y="296" as="sourcePoint" />
            <mxPoint x="538" y="296" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5-NNVl_hAvNS7Msvbjms-3" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Transformer Structure / Data&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;dashed=1;" parent="5-NNVl_hAvNS7Msvbjms-6" vertex="1">
          <mxGeometry width="1000" height="680" as="geometry">
            <mxRectangle width="270" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <UserObject label="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;class&amp;nbsp;&lt;span style=&quot;background-color: initial; text-align: left;&quot;&gt;FieldData&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot; style=&quot;border-style:solid;&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;+ fields: dict&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// &amp;lt;&lt;span style=&quot;background-color: initial;&quot;&gt;Field Name string: &lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Xblock data&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;hr style=&quot;border-style: solid;&quot; size=&quot;1&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;class_field_names: [&#39;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;fields&#39;]&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;-&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;_is_own_field(field_name): bool&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;__getattr__(&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;field_name): object&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;+ __setattr__(field_name, field_value): None&lt;/span&gt;&lt;/p&gt;" tooltip="Source : openedx/core/djangoapps/content/block_structure/block_structure.py&#xa;&#xa;&#xa;class _BlockRelations(object):&#xa;    &quot;&quot;&quot;&#xa;    Data structure to encapsulate relationships for a single block,&#xa;    including its children and parents.&#xa;    &quot;&quot;&quot;&#xa;    def __init__(self):&#xa;&#xa;        # List of usage keys of this block&#39;s parents.&#xa;        # list [UsageKey]&#xa;        self.parents = []&#xa;&#xa;        # List of usage keys of this block&#39;s children.&#xa;        # list [UsageKey]&#xa;        self.children = []&#xa;&#xa;    def __getattr__(self, field_name):&#xa;        if self._is_own_field(field_name):&#xa;            return super(FieldData, self).__getattr__(field_name)&#xa;        try:&#xa;            return self.fields[field_name]&#xa;        except KeyError:&#xa;            raise AttributeError(&quot;Field {0} does not exist&quot;.format(field_name))&#xa;&#xa;    def __setattr__(self, field_name, field_value):&#xa;        if self._is_own_field(field_name):&#xa;            return super(FieldData, self).__setattr__(field_name, field_value)&#xa;        else:&#xa;            self.fields[field_name] = field_value&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;&#xa;" id="ZLwdJihxKhlf1zQtMXW1-11">
          <mxCell style="verticalAlign=top;align=left;overflow=fill;html=1;whiteSpace=wrap;dashed=1;strokeWidth=2;" parent="5-NNVl_hAvNS7Msvbjms-3" vertex="1">
            <mxGeometry x="556" y="490.5" width="378" height="133" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="5-NNVl_hAvNS7Msvbjms-7" value="&lt;b&gt;&lt;font color=&quot;#ff3333&quot;&gt;Use&lt;/font&gt;&lt;/b&gt;" style="endArrow=open;endSize=12;dashed=1;html=1;rounded=0;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="5-NNVl_hAvNS7Msvbjms-6" source="ZLwdJihxKhlf1zQtMXW1-1" target="ZLwdJihxKhlf1zQtMXW1-13" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="504" y="232" as="sourcePoint" />
            <mxPoint x="664" y="232" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
